<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Call Center API - TEL4VN</title>
    <script type="text/javascript" id="www-widgetapi-script" src="https://www.youtube.com/s/player/9216d1f7/www-widgetapi.vflset/www-widgetapi.js" async></script>
    <link rel="stylesheet" href="css/style-e2699949.css">
    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
      <script src="javascripts/all-e033bdd3.js"></script>
      <script>
        $(function() { setupCodeCopy(); });
      </script>
    <link href="images/favicon-639cf3ec.ico" rel="icon" type="image/ico" />
  </head>
  <style>
    .copy-clipboard {
      top : 0;
      right : 0;
      max-width : 3em;
      position : absolute;
      float: right !important;
      width: 100%;
      height: 100%;
      margin-right: 1em;
    }
    .copy-clipboard svg{
      display: block;
      color: white;
      margin: 10px -10px 0 0;
      padding: 0.5rem 1rem ;
      font-size: .75rem;
    }
    .copy-clipboard svg path{
      fill: white;
    }
    .navbar-brand .badge {
      top:-1.25rem;
      position: relative;
    }
  </style>
  <body class="callcenter headroom headroom--top headroom--not-bottom" data-languages="[&quot;shell&quot;]" data-spy="scroll" data-target="#page-nav">
    <!-- header -->
    <header class="header header-sticky header-light" style="background-color: #3bb78f;background-image: linear-gradient(315deg, #3bb78f 0%, #0bab64 74%);">
      <div class="container-fluid">
        <div class="row">
          <nav class="navbar navbar-expand-lg navbar-light">
            <a href="#" class="navbar-brand"><img src="images/logo-4a7690d9.png" class="logo" alt="" /></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto"></ul>
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link text-light font-weight-bold" href="https://tongdaivoip.com" target="_blank">Home</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link text-light font-weight-bold dropdown-toggle active" href="#" id="dropdown-1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Documentation
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdown-1">
                    <a class="dropdown-item" href="/index.html">PBX API</a>
                    <a class="dropdown-item" href="/autocall.html">Autocall API</a>
                    <a class="dropdown-item" href="/billing.html">Billing API</a>
                    <a class="dropdown-item" href="/callcenter.html">CallCenter v1 API</a>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link text-light font-weight-bold dropdown-toggle" href="#" id="dropdown-1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    SDK
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdown-1">
                    <a class="dropdown-item" href="https://portal.tel4vn.com" target="_blank">Portal</a>
                    <a class="dropdown-item" href="https://portal.tel4vn.com/docs" target="_blank">Document</a>
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-light font-weight-bold" href="mailto:tech@tel4vn.com">Support</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <!-- / header -->
    <section class="pt-5">
      <div class="container-fluid">
        <div class="row justify-content-between">
          <!-- navigation -->
          <aside class="col-lg-3 col-xxl-2 p-3 doc-sidebar">
            <div class="sticky">
              <nav class="navbar navbar-vertical navbar-expand-lg navbar-light">
                <div>
                  <a href="#" class="navbar-brand">
                    <h3>Call Center API<span class="badge badge-green ml-1">1.0.8</span></h3>
                  </a>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                </div>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul id="page-nav" class="nav flex-column nav-vertical-2">
                      <li class="nav-item">
                        <a href="#introduction" class="nav-link" data-title="Introduction" >Introduction</a>
                        <div class="collapse" id="introduction-nav" data-parent="#page-nav">
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#authentication" class="nav-link" data-title="Authentication"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="authentication" data-target="#authentication-nav" >Authentication</a>
                        <div class="collapse" id="authentication-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#login-account" class="nav-link" data-title="Login Account" parent-id="authentication-nav">Login Account</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-access-token" class="nav-link" data-title="Get Access Token" parent-id="authentication-nav">Get Access Token</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#event" class="nav-link" data-title="Event"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="event" data-target="#event-nav" >Event</a>
                        <div class="collapse" id="event-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#get-events" class="nav-link" data-title="Get Events" parent-id="event-nav">Get Events</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#create-events" class="nav-link" data-title="Create Events" parent-id="event-nav">Create Events</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#delete-event" class="nav-link" data-title="Delete Event" parent-id="event-nav">Delete Event</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#event-hook-data" class="nav-link" data-title="Event Hook Data" parent-id="event-nav">Event Hook Data</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#note" class="nav-link" data-title="Note*" parent-id="event-nav">Note*</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#cdrs-call-detail-records" class="nav-link" data-title="CDRs - Call Detail Records"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="cdrs-call-detail-records" data-target="#cdrs-call-detail-records-nav" >CDRs - Call Detail Records</a>
                        <div class="collapse" id="cdrs-call-detail-records-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#cdr-mapping" class="nav-link" data-title="CDR Mapping" parent-id="cdrs-call-detail-records-nav">CDR Mapping</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-cdrs" class="nav-link" data-title="Get CDRs" parent-id="cdrs-call-detail-records-nav">Get CDRs</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-a-specific-cdr" class="nav-link" data-title="Get a Specific CDR" parent-id="cdrs-call-detail-records-nav">Get a Specific CDR</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#click-to-call" class="nav-link" data-title="Click-to-call"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="click-to-call" data-target="#click-to-call-nav" >Click-to-call</a>
                        <div class="collapse" id="click-to-call-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#synchronous-get" class="nav-link" data-title="Synchronous - GET" parent-id="click-to-call-nav">Synchronous - GET</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#asynchronous-get" class="nav-link" data-title="Asynchronous - GET" parent-id="click-to-call-nav">Asynchronous - GET</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#asynchronous-post" class="nav-link" data-title="Asynchronous - POST" parent-id="click-to-call-nav">Asynchronous - POST</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#error" class="nav-link" data-title="Error" parent-id="click-to-call-nav">Error</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#call" class="nav-link" data-title="Call"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="call" data-target="#call-nav" >Call</a>
                        <div class="collapse" id="call-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#list-calls" class="nav-link" data-title="List Calls" parent-id="call-nav">List Calls</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#transfer-a-call" class="nav-link" data-title="Transfer a call" parent-id="call-nav">Transfer a call</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#listen-a-call" class="nav-link" data-title="Listen a call" parent-id="call-nav">Listen a call</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#whisper-a-call" class="nav-link" data-title="Whisper a call" parent-id="call-nav">Whisper a call</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#barge-a-call" class="nav-link" data-title="Barge a call" parent-id="call-nav">Barge a call</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#autodialer" class="nav-link" data-title="Autodialer"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="autodialer" data-target="#autodialer-nav" >Autodialer</a>
                        <div class="collapse" id="autodialer-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#nh-n-d-li-u-queue" class="nav-link" data-title="Nhận dữ liệu queue" parent-id="autodialer-nav">Nhận dữ liệu queue</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#stop-queue" class="nav-link" data-title="Stop Queue" parent-id="autodialer-nav">Stop Queue</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#delete-queue" class="nav-link" data-title="Delete Queue" parent-id="autodialer-nav">Delete Queue</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#start-queue" class="nav-link" data-title="Start Queue" parent-id="autodialer-nav">Start Queue</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#autocall" class="nav-link" data-title="Autocall"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="autocall" data-target="#autocall-nav" >Autocall</a>
                        <div class="collapse" id="autocall-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#nh-n-d-li-u-queue-2" class="nav-link" data-title="Nhận dữ liệu queue" parent-id="autocall-nav">Nhận dữ liệu queue</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#import-danh-sach-ch-n" class="nav-link" data-title="Import danh sách chặn" parent-id="autocall-nav">Import danh sách chặn</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#stop-queue-2" class="nav-link" data-title="Stop Queue" parent-id="autocall-nav">Stop Queue</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#delete-queue-2" class="nav-link" data-title="Delete Queue" parent-id="autocall-nav">Delete Queue</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#start-queue-2" class="nav-link" data-title="Start Queue" parent-id="autocall-nav">Start Queue</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#user" class="nav-link" data-title="User"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="user" data-target="#user-nav" >User</a>
                        <div class="collapse" id="user-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#get-user-status" class="nav-link" data-title="Get User Status" parent-id="user-nav">Get User Status</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#customer" class="nav-link" data-title="Customer"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="customer" data-target="#customer-nav" >Customer</a>
                        <div class="collapse" id="customer-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#get-list-customers" class="nav-link" data-title="Get List Customers" parent-id="customer-nav">Get List Customers</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-specific-customer" class="nav-link" data-title="Get Specific Customer" parent-id="customer-nav">Get Specific Customer</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#post-customer" class="nav-link" data-title="Post Customer" parent-id="customer-nav">Post Customer</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#errors" class="nav-link" data-title="Errors" >Errors</a>
                        <div class="collapse" id="errors-nav" data-parent="#page-nav">
                        </div>
                      </li>
                  </ul>
                </div>
              </nav>
            </div>
          </aside>
          <!-- / navigation -->
          <!-- content -->
          <article class="col-lg-9 col-xxl-10 doc-content">
            <div class="row">
              <div class="col">
                <div class="doc-content-header">
                  <div class="row align-items-center">
                    <div class="col">
                      <nav aria-label="breadcrumb" class="align-items-center">
                        <a href="index.html" class="breadcrumb-back" title="Back"></a>
                        <ol class="breadcrumb d-none d-lg-inline-flex">
                          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                          <li class="breadcrumb-item active" aria-current="page">Call Center API</li>
                        </ol>
                      </nav>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row justify-content-between doc-content-body">
              <article class="col-md-9 col-xxl-8">
                <h1 id='introduction' class='h1 font-weight-light'>Introduction</h1>
<p>Xin chào! Đây là bộ API tích hợp tổng đài VoIP - Call Center vào các hệ thống CRM, WebApp.</p>

<p>Nếu bạn cần thông tin để tích hợp hoặc cần hỗ trợ vui lòng liên hệ mail: tech@tel4vn.com.</p>

<p>Các thông tin như {{API_HOST}}, {{API_KEY}}, tài khoản admin, tài khoản SIP test sẽ được bên phía Tổng đài cung cấp.</p>
<h1 id='authentication' class='h1 font-weight-light'>Authentication</h1><h2 id='login-account' class='h2 font-weight-light'>Login Account</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://{{API_HOST}}/v1/auth'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "username" : "foo@test.tel4vn.com",
    "password" : "foo123"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-bbbb-cccc-dddd-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"110"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"adminfortest"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Login thành công sẽ trả về thông tin account.</p>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/auth</code></p>
<h3 id='body' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>Account&#39;s username</td>
</tr>
<tr>
<td>password</td>
<td>Account&#39;s password</td>
</tr>
</tbody></table>
<h2 id='get-access-token' class='h2 font-weight-light'>Get Access Token</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://{{API_HOST}}/v2/auth/token'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "api_key": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeee"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"expired_in"</span><span class="p">:</span><span class="w"> </span><span class="mi">14763877</span><span class="p">,</span><span class="w">
    </span><span class="nl">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwiaWF0IjoxNjEzNjMyNzc4fQ.dGhpcyBpcyB0ZXN0IGRhdGE="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avavavav-1111-2222-3333-eeeeeeee"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>PBX API sử dụng API Token để xác thực truy cập tới API. API Token bạn lấy từ service thông qua {{API_KEY}} được Tổng đài cung cấp.</p>

<p>Tất cả các API của PBX đều yêu cầu user cung cấp Token trong header giống phía dưới.</p>

<p><code>Authorization: Bearer {TOKEN}</code></p>

<div class="alert alert-success alert-dismissible fade show" role="alert">
Bạn vui lòng thay đổi <code>{TOKEN}</code> bằng token đã lấy được.
</div>
<h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/auth/token</code></p>
<h3 id='body-2' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>api_key</td>
<td>api_key có trong thông tin của account</td>
</tr>
</tbody></table>
<h1 id='event' class='h1 font-weight-light'>Event</h1><h2 id='get-events' class='h2 font-weight-light'>Get Events</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v1/event'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"event_domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avavavav-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"event_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hangup"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"callback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://webhook.demo/"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"callback_apikey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Trả về các call events của tenant.</p>
<h3 id='http-request-3' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v1/event</code></p>
<h2 id='create-events' class='h2 font-weight-light'>Create Events</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://{{API_HOST}}/v1/event'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "callback_url" : "https://webhook.demo/",
    "callback_apikey" : "foo",
    "event" : "create"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Tạo Event Hook, mỗi lần bắt được {event} tổng đài sẽ hook dữ liệu về {callback_url}.</p>
<h3 id='http-request-4' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/event</code></p>
<h3 id='body-3' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>callback_url</td>
<td>Domain Url mà tổng đài sẽ hook dữ liệu tới</td>
</tr>
<tr>
<td>callback_apikey</td>
<td>ApiKey hoặc access token của domain (optional)</td>
</tr>
<tr>
<td>event</td>
<td>SIP Call Event</td>
</tr>
</tbody></table>
<h3 id='sip-call-event' class='h3 font-weight-light'>SIP Call Event</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>hangup</td>
<td>Sự kiện khi cuộc gọi bị ngắt, huỷ</td>
</tr>
<tr>
<td>ringing</td>
<td>Sự kiện khi cuộc gọi được khởi tạo</td>
</tr>
<tr>
<td>answered</td>
<td>Sự kiện khi cuộc gọi được nhấc máy</td>
</tr>
<tr>
<td>cdr</td>
<td>Sự kiện sau khi cdr được tạo xong</td>
</tr>
</tbody></table>

<div class="alert alert-danger alert-dismissible fade show" role="alert">Nếu bạn tạo event nằm ngoài các event ở trên, hệ thống sẽ không nhận diện được nên sẽ không hook data về.</div>

<div class="alert alert-warning alert-dismissible fade show" role="alert">Nếu bạn cần hook event ngoài các event ở trên, vui lòng gửi mail hỗ trợ.</div>
<h2 id='delete-event' class='h2 font-weight-light'>Delete Event</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> DELETE <span class="s1">'http://{{API_HOST}}/v1/event/eeeeeeee-1111-2222-3333-eeeeeeee'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để xoá một event_domain.</p>
<h3 id='http-request-5' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>DELETE http://{{API_HOST}}/v1/event/&lt;ID&gt;</code></p>
<h3 id='url-parameters' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>ID của event</td>
</tr>
</tbody></table>
<h2 id='event-hook-data' class='h2 font-weight-light'>Event Hook Data</h2>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avavavav-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hotline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hangup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billsec"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='mo-t' class='h3 font-weight-light'>Mô tả</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>call_id</td>
<td>Id định danh cuộc gọi</td>
</tr>
<tr>
<td>sip_call_id</td>
<td>SIP Call Id</td>
</tr>
<tr>
<td>domain</td>
<td>Domain nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>direction</td>
<td>Hướng cuộc gọi (inbound / outbound)</td>
</tr>
<tr>
<td>from_number</td>
<td>Số gọi. Sẽ là số ext nếu cuộc gọi là outbound</td>
</tr>
<tr>
<td>to_number</td>
<td>Số nhận. Sẽ là số ext nếu cuộc gọi là inbound</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>state</td>
<td>ringing / answered / hangup / cdr</td>
</tr>
<tr>
<td>duration</td>
<td>Tổng thời lượng cuộc gọi. (Riêng sự kiện hangup)</td>
</tr>
<tr>
<td>billsec</td>
<td>Thời lượng tính từ khi hai bên kết nối. (Riêng sự kiện hangup)</td>
</tr>
<tr>
<td>recording_url</td>
<td>URL public để play file ghi âm. (Riêng sự kiện cdr)</td>
</tr>
<tr>
<td>status</td>
<td>Trạng thái cuộc gọi. (Riêng sự kiện cdr)</td>
</tr>
</tbody></table>
<h2 id='note' class='h2 font-weight-light'>Note*</h2>
<p>Một số thông tin cần lưu ý khi tích hợp event:</p>

<ul>
<li>Event ringing, answered, hangup là các event theo luồng của một cuộc gọi.</li>
<li>Event cdr là event sẽ gửi tới webhook sau khi tổng đài cập nhật CDR.</li>
<li>Đối với các case outbound: call_id của các event sẽ map giống nhau do tồn tại trên một cuộc gọi.</li>
<li>ĐốI với các case inbound:

<ul>
<li>Trường hợp 1 mobile - 1 extension: call_id của các event sẽ map giống nhau do tồn tại trên một cuộc gọi.</li>
<li>Trường hợp 1 mobile - nhiều extension (Ringing, Queue, IVR): call_id của các event ringing, answered, hangup sẽ giống nhau. call_id của event cdr sẽ khác nhau. Do call_id của các event ringing, answered, hangup là call_id xử lý của cuộc gọi trên từng extension, call_id của event cdr là call_id của cả một luồng inbound (Ringing, Queue, IVR).</li>
</ul></li>
</ul>
<h1 id='cdrs-call-detail-records' class='h1 font-weight-light'>CDRs - Call Detail Records</h1>
<p>Lịch sử cuộc gọi</p>
<h2 id='cdr-mapping' class='h2 font-weight-light'>CDR Mapping</h2><h3 id='default-mapping' class='h3 font-weight-light'>Default Mapping</h3>
<table><thead>
<tr>
<th>Thông tin</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id của CDR</td>
</tr>
<tr>
<td>sip_call_id</td>
<td>call_id trong bản tin SIP</td>
</tr>
<tr>
<td>cause</td>
<td>Trạng thái cuộc gọi dựa theo mã phản hồi giao thức SIP. Vd: NORMAL_CLEARING, NO_ANSWER, ...</td>
</tr>
<tr>
<td>duration</td>
<td>Thời hạn thực hiện cuộc gọi.</td>
</tr>
<tr>
<td>direction</td>
<td>Chiều cuộc gọi (inbound, outbound, local)</td>
</tr>
<tr>
<td>recording_url</td>
<td>Đường dẫn file ghi âm cuộc gọi</td>
</tr>
<tr>
<td>extension</td>
<td>Extension nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>from_number</td>
<td>Cuộc gọi từ số nào</td>
</tr>
<tr>
<td>to_number</td>
<td>Cuộc gọi đến số nào</td>
</tr>
<tr>
<td>receive_dest</td>
<td>Ringroup hoặc queue của extension nhận cuộc gọi</td>
</tr>
<tr>
<td>time_started</td>
<td>Thời gian bắt đầu cuộc gọi</td>
</tr>
<tr>
<td>time_answered</td>
<td>Thời gian khi cuộc gọi kết nối</td>
</tr>
<tr>
<td>time_ended</td>
<td>Thời gian kết thúc cuộc gọi</td>
</tr>
<tr>
<td>status</td>
<td>Trạng thái cuộc gọi</td>
</tr>
<tr>
<td>customer_id</td>
<td>Mã khách hàng</td>
</tr>
</tbody></table>
<h3 id='flex-mapping' class='h3 font-weight-light'>Flex Mapping</h3>
<table><thead>
<tr>
<th>Thông tin</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>cdrId</td>
<td>Id của cuộc gọi.</td>
</tr>
<tr>
<td>sip_call_id</td>
<td>call_id trong bản tin SIP</td>
</tr>
<tr>
<td>customerId</td>
<td>Mã khách hàng</td>
</tr>
<tr>
<td>extensionId</td>
<td>Số máy lẻ (username) của agent sẽ tiếp nhận cuộc gọi</td>
</tr>
<tr>
<td>recordFile</td>
<td>Đường dẫn file ghi âm cuộc gọi</td>
</tr>
<tr>
<td>to</td>
<td>Mã khách hàng</td>
</tr>
<tr>
<td>dialAt</td>
<td>Thời gian bắt đầu cuộc gọi</td>
</tr>
<tr>
<td>ringAt</td>
<td>Thời gian bắt đầu có chuông</td>
</tr>
<tr>
<td>answeredAt</td>
<td>Thời gian khi cuộc gọi kết nối</td>
</tr>
<tr>
<td>hangupAt</td>
<td>Thời gian kết thúc cuộc gọi</td>
</tr>
<tr>
<td>duration</td>
<td>Thời hạn thực hiện cuộc gọi.</td>
</tr>
<tr>
<td>direction</td>
<td>Chiều cuộc gọi (inbound, outbound, local)</td>
</tr>
<tr>
<td>status</td>
<td>Trạng thái cuộc gọi</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Status</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>answered</td>
<td>Có kết nối và nói chuyện với khách hàng</td>
</tr>
<tr>
<td>busy</td>
<td>Máy bận hoặc khách hàng bấm từ chối trả lời</td>
</tr>
<tr>
<td>no-answered</td>
<td>Outbound - Khách hàng không nghe máy, để hết chuông. Inbound - agent để hết chuông</td>
</tr>
<tr>
<td>cancel</td>
<td>Outbound - agent ngắt máy trước khi kết nối. Inbound - agent ngắt máy</td>
</tr>
<tr>
<td>not-available</td>
<td>Cuộc gọi báo thuê bao không liên lạc được, chế độ máy bay</td>
</tr>
<tr>
<td>invalid</td>
<td>Không hợp lệ, cuộc gọi bị lỗi, (Ví dụ: click-to-call agent không nghe máy, ngắt máy)</td>
</tr>
</tbody></table>
<h2 id='get-cdrs' class='h2 font-weight-light'>Get CDRs</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v2/cdr?'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Default response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"112233aabbccddee.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:35"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:43"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:46"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANSWERED"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934 "</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aabbccddee112233.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:20:58"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:21:05"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Flex response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"cdrId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c1d6ff3-c9b0-4fd1-8f5c-7be53f5f6973"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80bea701-49de-123a-89ab-fa163e3b9b38"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recordFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://recording.demo/0c1d6ff3-c9b0-4fd1-8f5c-7be53f5f6973"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extensionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hangupAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:14:56"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"answeredAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:14:33"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ringAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:14:36"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dialAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:14:31"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answered"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"billsec"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"cdrId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b689a2e3-0e12-47f4-8dc7-516c1dd10828"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c92973c8-49e1-123a-89ab-fa163e3b9b38"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recordFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extensionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"hangupAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:38:10"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"answeredAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"ringAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:38:05"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dialAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:38:01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"busy"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"billsec"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">35</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Trả về danh sách lịch sử cuộc gọi.
API CDRs sử dụng 2 cơ chế để trả về dữ liệu.
Pagination: Phân trang.
Scroll: Cuộn trang. (Mặc định)</p>

<p>Nếu user cung cấp trong param: page - Số trang, limit - số lượng trả về thì API sẽ trả về dữ liêu theo cơ chế Pagination.</p>
<h3 id='http-request-6' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v2/cdr</code></p>
<h3 id='query-parameters' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Khởi tạo cuộc gọi)</td>
<td>2021-02-18 hoặc 2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Khởi tạo cuộc gọi)</td>
<td>2021-02-19 hoặc 2021-02-19 00:00:00</td>
</tr>
<tr>
<td>duration</td>
<td>Thời hạn của cuộc gọi</td>
<td>10</td>
</tr>
<tr>
<td>extension</td>
<td>Cuộc gọi từ extension nào</td>
<td>101</td>
</tr>
<tr>
<td>phone</td>
<td>Từ hoặc tới số điện thoại nào</td>
<td>0899888999</td>
</tr>
<tr>
<td>direction</td>
<td>Chiều cuộc gọi (inbound, outbound, local)</td>
<td>outbound</td>
</tr>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi query. (offset sẽ thay thế page nếu có data) (Pagination)</td>
<td>0</td>
</tr>
</tbody></table>
<h2 id='get-a-specific-cdr' class='h2 font-weight-light'>Get a Specific CDR</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v2/cdr/01b7d166-b564-42ec-80a1-4ad343225934'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Default Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aabbccddee112233.."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:20:58"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:21:05"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Flex response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"cdrId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0c1d6ff3-c9b0-4fd1-8f5c-7be53f5f6973"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80bea701-49de-123a-89ab-fa163e3b9b38"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recordFile"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://recording.demo/0c1d6ff3-c9b0-4fd1-8f5c-7be53f5f6973"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"extensionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hangupAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:14:56"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"answeredAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:14:33"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ringAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:14:36"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"dialAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-17 14:14:31"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"answered"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billsec"</span><span class="p">:</span><span class="w"> </span><span class="mi">23</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customerId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy một cdr cụ thể.
Id có thể id của CDR hoặc sip_call_id trong bản tin</p>
<h3 id='http-request-7' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v2/cdr/&lt;ID&gt;</code></p>
<h3 id='url-parameters-2' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>Id của CDR hoặc sip_call_id trong bản tin</td>
</tr>
</tbody></table>
<h1 id='click-to-call' class='h1 font-weight-light'>Click-to-call</h1><h2 id='synchronous-get' class='h2 font-weight-light'>Synchronous - GET</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v1/click2call?ext=101&amp;phone=0899098899'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>Nếu Extension đã login thì API Click-to-call Synchronous sẽ chờ tới khi extension nhấc máy hoặc ngắt máy.</p>

<div class="alert alert-success alert-dismissible fade show" role="alert">
Đầu số hotline dùng để gọi ra ngoài bạn vui lòng liên hệ team TEL4VN để được cung cấp và cài đặt.
</div>
<h3 id='http-request-8' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v1/click2call?ext=&lt;EXTENSION&gt;&amp;phone=&lt;PHONE&gt;</code></p>
<h3 id='url-parameters-3' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension thực hiện cuộc gọi</td>
<td>true</td>
</tr>
<tr>
<td>phone</td>
<td>Số điện thoại sẽ được gọi tới</td>
<td>true</td>
</tr>
<tr>
<td>src_cid_name</td>
<td>Tên hiển thị trên máy extension. Default: Click2Call</td>
<td>false</td>
</tr>
<tr>
<td>src_cid_number</td>
<td>Số hiển thị trên máy extension. Default: Số của extension</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_name</td>
<td>Tên của số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_number</td>
<td>Số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>auto_answer</td>
<td>Tự động nhấc máy phía extension. Default: false</td>
<td>false</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số hotline để thực hiện cuộc gọi ra ngoài</td>
<td>false</td>
</tr>
<tr>
<td>customer_id</td>
<td>Mã khách hàng</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='asynchronous-get' class='h2 font-weight-light'>Asynchronous - GET</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v1/click2call/async?ext=101&amp;phone=0899098899'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User not registered extension with Softphone or IP Phone"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>API Click-to-call Asynchronous sẽ không chờ tới khi extension nhấc máy hoặc ngắt máy, mà sẽ trả về call_id nếu extension đã login và trả về mã lỗi nếu extension không login.</p>

<div class="alert alert-success alert-dismissible fade show" role="alert">
Đầu số hotline dùng để gọi ra ngoài bạn vui lòng liên hệ team TEL4VN để được cung cấp và cài đặt.
</div>
<h3 id='http-request-9' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v1/click2call/async?ext=&lt;EXTENSION&gt;&amp;phone=&lt;PHONE&gt;</code></p>
<h3 id='url-parameters-4' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension thực hiện cuộc gọi</td>
<td>true</td>
</tr>
<tr>
<td>phone</td>
<td>Số điện thoại sẽ được gọi tới</td>
<td>true</td>
</tr>
<tr>
<td>src_cid_name</td>
<td>Tên hiển thị trên máy extension. Default: Click2Call</td>
<td>false</td>
</tr>
<tr>
<td>src_cid_number</td>
<td>Số hiển thị trên máy extension. Default: Số của extension</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_name</td>
<td>Tên của số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_number</td>
<td>Số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>auto_answer</td>
<td>Tự động nhấc máy phía extension. Default: false</td>
<td>false</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số hotline để thực hiện cuộc gọi ra ngoài</td>
<td>false</td>
</tr>
<tr>
<td>customer_id</td>
<td>Mã khách hàng</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='asynchronous-post' class='h2 font-weight-light'>Asynchronous - POST</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://{{API_HOST}}/v2/click2call'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
  "id": "KH1",
  "mobile": "0899098899",
  "agent": "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50038035-0717-40f1-b7af-eb92021b012e"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User not registered extension with Softphone or IP Phone"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>API Click-to-call Asynchronous sẽ không chờ tới khi extension nhấc máy hoặc ngắt máy, mà sẽ trả về call_id nếu extension đã login và trả về mã lỗi nếu extension không login.</p>
<h3 id='http-request-10' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/click2call</code></p>
<h3 id='body-4' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>ID của khách hàng.</td>
</tr>
<tr>
<td>mobile</td>
<td>Số điện thoại cần gọi của khách hàng</td>
</tr>
<tr>
<td>agent</td>
<td>Số máy lẻ của chuyên viên</td>
</tr>
</tbody></table>
<h2 id='error' class='h2 font-weight-light'>Error</h2>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>USER_BUSY</td>
<td>Người dùng hiện tại đang bận</td>
</tr>
<tr>
<td>USER_NOT_REGISTERED</td>
<td>Người dùng chưa login Softphone hoặc IP Phone</td>
</tr>
</tbody></table>
<h1 id='call' class='h1 font-weight-light'>Call</h1><h2 id='list-calls' class='h2 font-weight-light'>List Calls</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v2/call'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08 17:37:37"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.2.3.4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CS_EXECUTE"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy danh sách các cuộc gọi theo thời gian thực.</p>
<h3 id='http-request-11' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v2/call</code></p>
<h2 id='transfer-a-call' class='h2 font-weight-light'>Transfer a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://{{API_HOST}}/v2/call/01b7d166-b564-42ec-80a1-4ad343225934/transfer'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện chuyển cuộc gọi sang extension khác.</p>
<h3 id='http-request-12' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/call/&lt;CALL_ID&gt;/transfer</code></p>
<h3 id='body-5' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
</tr>
</tbody></table>
<h2 id='listen-a-call' class='h2 font-weight-light'>Listen a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://{{API_HOST}}/v2/call/01b7d166-b564-42ec-80a1-4ad343225934/listen'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện nghe lén cuộc gọi của một extension khác.</p>
<h3 id='http-request-13' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/call/&lt;CALL_ID&gt;/listen</code></p>
<h3 id='body-6' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi</td>
</tr>
</tbody></table>
<h2 id='whisper-a-call' class='h2 font-weight-light'>Whisper a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://{{API_HOST}}/v2/call/01b7d166-b564-42ec-80a1-4ad343225934/whisper'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện cuộc gọi với extension, mobile sẽ không nghe được.</p>
<h3 id='http-request-14' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/call/&lt;CALL_ID&gt;/whisper</code></p>
<h3 id='body-7' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
</tr>
</tbody></table>
<h2 id='barge-a-call' class='h2 font-weight-light'>Barge a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'http://{{API_HOST}}/v2/call/01b7d166-b564-42ec-80a1-4ad343225934/barge'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện cuộc gọi 3 bên với extension và mobile.</p>
<h3 id='http-request-15' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/call/&lt;CALL_ID&gt;/barge</code></p>
<h3 id='body-8' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
</tr>
</tbody></table>
<h1 id='autodialer' class='h1 font-weight-light'>Autodialer</h1><h2 id='nh-n-d-li-u-queue' class='h2 font-weight-light'>Nhận dữ liệu queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'https://{{API_HOST}}/v2/autodialer/queue'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
  "campaign_id": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeee",
  "queue_code": "Autodialer",
  "precall_ratio": "150",
  "max_recall_count": "2",
  "queue_agents": "5001",
  "customers": [
    {
      "id": "TEL4VN_Test",
      "mobiles": ["0899123456"],
    }
  ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campaign is invalid"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích nhận thông tin về queue để tiến hành tự động gọi ra.</p>
<h3 id='http-request-16' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v2/autodialer/queue</code></p>
<h3 id='body-9' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-bbbb-cccc-dddd-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autodialer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"precall_ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max_recall_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"queue_agents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TEL4VN_Test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mobiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"0899123456"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>campaign_id</td>
<td>Id của campaign</td>
<td>x</td>
</tr>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
<tr>
<td>precall_ratio</td>
<td>Tỉ lệ thực hiện cuộc gọi đựa trên số lượng agent</td>
<td>x</td>
</tr>
<tr>
<td>max_recall_count</td>
<td>Số lượng cuộc gọi lại nếu không thành công</td>
<td>x</td>
</tr>
<tr>
<td>customers.id</td>
<td>ID của khách hàng</td>
<td>x</td>
</tr>
<tr>
<td>customers.mobiles</td>
<td>Danh sách các số điện thoại của khách hàng</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='stop-queue' class='h2 font-weight-light'>Stop Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'https://{{API_HOST}}/v2/autodialer/queue/stop'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autodialer"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu tạm dừng một queue đang thực hiện.</p>
<h3 id='http-request-17' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v2/autodialer/queue/stop</code></p>
<h3 id='body-10' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autodialer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='delete-queue' class='h2 font-weight-light'>Delete Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'https://{{API_HOST}}/v2/autodialer/queue/delete'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autodialer"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu thu hồi (xoá) một queue sau khi đã tạm dừng.</p>
<h3 id='http-request-18' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v2/autodialer/queue/delete</code></p>
<h3 id='body-11' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autodialer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='start-queue' class='h2 font-weight-light'>Start Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'https://{{API_HOST}}/v2/autodialer/queue/start'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autodialer"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu tiếp tục một queue đang tạm dừng.</p>
<h3 id='http-request-19' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v2/autodialer/queue/start</code></p>
<h3 id='body-12' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autodialer"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h1 id='autocall' class='h1 font-weight-light'>Autocall</h1><h2 id='nh-n-d-li-u-queue-2' class='h2 font-weight-light'>Nhận dữ liệu queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v2/autocall/queue'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autocall-Q1",
    "template": "IVR-1",
    "concurrent_call" : 5,
    "max_recall_count": 3,
    "min_recall_duration": 3,
    "customers": [
        {
            "id": "TEL4VN_Test",
            "mobiles": [
                "0982596021"
            ],
            "contract_number": "HD123456",
            "upcoming_due_date": "2021-07-13",
            "upcoming_amount": 5000000,
            "due_date": "2021-07-13",
            "dpd": 5,
            "number_of_ovd_inst": 6,
            "total_ovd_amount": 3211100
        }
    ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"fail"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"TEL4VN_Test"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"import fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"fail"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích nhận thông tin về queue để tiến hành tự động gọi ra theo kịch bản.</p>
<h3 id='http-request-20' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/autocall/queue</code></p>
<h3 id='body-13' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall-Q1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IVR-1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"concurrent_call"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max_recall_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"min_recall_duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TEL4VN_Test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mobiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"0982596021"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"contract_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HD123456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"upcoming_due_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-13"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"upcoming_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">5000000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"due_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-13"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"dpd"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nl">"number_of_ovd_inst"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
      </span><span class="nl">"total_ovd_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">3211100</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
<tr>
<td>template</td>
<td>Kịch bản dùng để</td>
<td>x</td>
</tr>
<tr>
<td>concurrent_call</td>
<td>Số lượng cuộc gọi đồng thời</td>
<td></td>
</tr>
<tr>
<td>max_recall_count</td>
<td>Số lượng cuộc gọi lại nếu không thành công</td>
<td></td>
</tr>
<tr>
<td>min_recall_duration</td>
<td>Nếu thời gian tính từ lúc nhấc máy nhỏ hơn sẽ gọi lại</td>
<td></td>
</tr>
<tr>
<td>customers.id</td>
<td>ID của khách hàng</td>
<td>x</td>
</tr>
<tr>
<td>customers.mobiles</td>
<td>Danh sách các số điện thoại của khách hàng</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='import-danh-sach-ch-n' class='h2 font-weight-light'>Import danh sách chặn</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v2/autocall/queue/dnc'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autocall-Q1",
    "customers": [
        {
          "id": "KH_01"
        },
        {
          "id": "KH_02"
        },
        {
          "id": "KH_03"
        }
    ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích cung cấp danh sách các khách hàng cần chặn cuộc gọi lên tổng đài. Tổng đài sẽ loại/bỏ qua các khách hàng này khi quay số nếu chưa quay đến. Nếu đã quay rồi hoặc đang trong cuộc gọi thì giữ nguyên.</p>
<h3 id='http-request-21' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/autocall/queue/dnc</code></p>
<h3 id='body-14' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall-Q1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH_01"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH_02"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH_03"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
<tr>
<td>customers.id</td>
<td>ID của khách hàng</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='stop-queue-2' class='h2 font-weight-light'>Stop Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v2/autocall/queue/stop'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autocall-Q1"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu tạm dừng một queue đang thực hiện.</p>
<h3 id='http-request-22' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/autocall/queue/stop</code></p>
<h3 id='body-15' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall-Q1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='delete-queue-2' class='h2 font-weight-light'>Delete Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v2/autocall/queue/delete'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autocall-Q1"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu thu hồi (xoá) một queue sau khi đã tạm dừng.</p>
<h3 id='http-request-23' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/autocall/queue/delete</code></p>
<h3 id='body-16' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall-Q1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='start-queue-2' class='h2 font-weight-light'>Start Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v2/autocall/queue/start'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autocall-Q1"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu tiếp tục một queue đang tạm dừng.</p>
<h3 id='http-request-24' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/autocall/queue/start</code></p>
<h3 id='body-17' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall-Q1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h1 id='user' class='h1 font-weight-light'>User</h1><h2 id='get-user-status' class='h2 font-weight-light'>Get User Status</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v2/user/{{user_id}}/status'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"agent_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test User 01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ext_loggedin"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.user01"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user is not existed"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy trạng thái của người dùng trên hệ thống.</p>

<table><thead>
<tr>
<th>Thông tin</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>Mã code HTTP trả về</td>
</tr>
<tr>
<td>content</td>
<td>Thông báo</td>
</tr>
<tr>
<td>data</td>
<td>Data trả về</td>
</tr>
<tr>
<td>data.agent_name</td>
<td>Tên agent</td>
</tr>
<tr>
<td>data.extension</td>
<td>Extension của user</td>
</tr>
<tr>
<td>data.ext_loggedin</td>
<td>Extension này có đang được log in trên softphone</td>
</tr>
<tr>
<td>data.user_uuid</td>
<td>Id của user</td>
</tr>
<tr>
<td>data.username</td>
<td>Username của user</td>
</tr>
</tbody></table>
<h3 id='http-request-25' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v2/customer/user/{{user_id}}/status</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>Id người dùng</td>
<td>test.user01 hoặc aaaaaaaa-1111-2222-3333-eeeeeeee</td>
</tr>
</tbody></table>
<h1 id='customer' class='h1 font-weight-light'>Customer</h1><h2 id='get-list-customers' class='h2 font-weight-light'>Get List Customers</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v2/customer'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contract_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-15T12:50:23.805319Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Khach Hang 01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888998"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"after_day"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"contract_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DEF456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-15T12:50:24.565573Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gggggggg-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Khach Hang 02"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"after_day"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy danh sách khách hàng đã upload.</p>

<table><thead>
<tr>
<th>Thông tin</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>Mã code HTTP trả về</td>
</tr>
<tr>
<td>content</td>
<td>Thông báo</td>
</tr>
<tr>
<td>data</td>
<td>Data trả về</td>
</tr>
<tr>
<td>data.campaign_id</td>
<td>Id của chiến dịch</td>
</tr>
<tr>
<td>data.contract_number</td>
<td>Mã hợp đồng</td>
</tr>
<tr>
<td>data.customer_code</td>
<td>Mã khách hàng</td>
</tr>
<tr>
<td>data.customer_id</td>
<td>Id khách hàng</td>
</tr>
<tr>
<td>data.customer_name</td>
<td>Tên khách hàng</td>
</tr>
<tr>
<td>data.phone_number</td>
<td>Số điện thoại khách hàng</td>
</tr>
<tr>
<td>data.status</td>
<td>Trạng thái khách hàng</td>
</tr>
<tr>
<td>data.created_at</td>
<td>Thời gian khởi tạo</td>
</tr>
<tr>
<td>data.updated_at</td>
<td>Thời gian được cập nhật gần nhất</td>
</tr>
<tr>
<td>data.after_day</td>
<td>Sau bao nhiêu ngày sẽ được tự động gọi lại</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Status</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>new</td>
<td>Khách hàng vừa được khởi tạo mới</td>
</tr>
<tr>
<td>queue</td>
<td>Đã được đưa vào hàng chờ để tiến hành gọi</td>
</tr>
<tr>
<td>answered</td>
<td>Có kết nối và nói chuyện với khách hàng</td>
</tr>
<tr>
<td>busy</td>
<td>Máy bận hoặc khách hàng bấm từ chối trả lời</td>
</tr>
<tr>
<td>no-answered</td>
<td>Khách hàng không nghe máy, để hết chuông</td>
</tr>
<tr>
<td>cancel</td>
<td>Phía extension, agent chủ động ngắt máy</td>
</tr>
<tr>
<td>fail</td>
<td>Khi tổng đài nhận mã lỗi từ telco</td>
</tr>
<tr>
<td>unknown</td>
<td>Trạng thái lỗi không xác định</td>
</tr>
</tbody></table>
<h3 id='http-request-26' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v2/customer</code></p>
<h3 id='query-parameters-2' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>campaign_id</td>
<td>Id Chiến dịch khách hàng thuộc về</td>
<td>aaaaaaaa-1111-2222-3333-eeeeeeee</td>
</tr>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi query</td>
<td>0</td>
</tr>
</tbody></table>
<h2 id='get-specific-customer' class='h2 font-weight-light'>Get Specific Customer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'http://{{API_HOST}}/v2/customer/dddddddd-1111-2222-3333-eeeeeeee'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"contract_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-15T12:50:23.805319Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customer_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Khach Hang 01"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888998"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NEW"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0001-01-01T00:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"after_day"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error response:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Found"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Not Found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy thông tin của một khách hàng cụ thể.</p>

<table><thead>
<tr>
<th>Thông tin</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>Mã code HTTP trả về</td>
</tr>
<tr>
<td>content</td>
<td>Thông báo</td>
</tr>
<tr>
<td>data</td>
<td>Data trả về</td>
</tr>
<tr>
<td>data.campaign_id</td>
<td>Id của chiến dịch</td>
</tr>
<tr>
<td>data.contract_number</td>
<td>Mã hợp đồng</td>
</tr>
<tr>
<td>data.customer_code</td>
<td>Mã khách hàng</td>
</tr>
<tr>
<td>data.customer_id</td>
<td>Id khách hàng</td>
</tr>
<tr>
<td>data.customer_name</td>
<td>Tên khách hàng</td>
</tr>
<tr>
<td>data.phone_number</td>
<td>Số điện thoại khách hàng</td>
</tr>
<tr>
<td>data.status</td>
<td>Trạng thái khách hàng</td>
</tr>
<tr>
<td>data.created_at</td>
<td>Thời gian khởi tạo</td>
</tr>
<tr>
<td>data.updated_at</td>
<td>Thời gian được cập nhật gần nhất</td>
</tr>
<tr>
<td>data.after_day</td>
<td>Sau bao nhiêu ngày sẽ được tự động gọi lại</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Status</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>new</td>
<td>Khách hàng vừa được khởi tạo mới</td>
</tr>
<tr>
<td>queue</td>
<td>Đã được đưa vào hàng chờ để tiến hành gọi</td>
</tr>
<tr>
<td>answered</td>
<td>Có kết nối và nói chuyện với khách hàng</td>
</tr>
<tr>
<td>busy</td>
<td>Máy bận hoặc khách hàng bấm từ chối trả lời</td>
</tr>
<tr>
<td>no-answered</td>
<td>Khách hàng không nghe máy, để hết chuông</td>
</tr>
<tr>
<td>cancel</td>
<td>Phía extension, agent chủ động ngắt máy</td>
</tr>
<tr>
<td>fail</td>
<td>Khi tổng đài nhận mã lỗi từ telco</td>
</tr>
<tr>
<td>unknown</td>
<td>Trạng thái lỗi không xác định</td>
</tr>
</tbody></table>
<h3 id='http-request-27' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET http://{{API_HOST}}/v2/customer/{{customer_id}}</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>customer_id</td>
<td>Id khách hàng</td>
<td>aaaaaaaa-1111-2222-3333-eeeeeeee</td>
</tr>
</tbody></table>
<h2 id='post-customer' class='h2 font-weight-light'>Post Customer</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v2/autocall/queue'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "campaign_id": "aaaaaaaa-1111-2222-3333-eeeeeeee",
    "customer_name": "Khach Hang 01",
    "customer_code": "KH01",
    "phone_number": "0899888998",
    "contract_number": "ABC123",
    "after_day": 7
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">201</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">400</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Does not match pattern '^(84|0[3|5|7|8|9])+([0-9]{8})$'"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bad Request"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để nhận thông tin của một khách hàng cụ thể. 7 ngày tính từ ngày thông tin được gửi sang, hệ thông sẽ thực hiện autodialer khách hàng cho agent.</p>
<h3 id='http-request-28' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v2/customer</code></p>
<h3 id='body-18' class='h3 font-weight-light'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Khach Hang 01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customer_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888998"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"contract_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC123"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"after_day"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>campaign_id</td>
<td>Id chiến dịch</td>
<td>x</td>
</tr>
<tr>
<td>customer_name</td>
<td>Tên khách hàng</td>
<td></td>
</tr>
<tr>
<td>customer_code</td>
<td>Mã khách hàng</td>
<td>x</td>
</tr>
<tr>
<td>phone_number</td>
<td>Số điện thoại của khách hàng</td>
<td>x</td>
</tr>
<tr>
<td>contract_number</td>
<td>Mã hợp đồng</td>
<td>x</td>
</tr>
<tr>
<td>after_day</td>
<td>Sau bao nhiêu ngày sẽ được tự động gọi lại. (Mặc định sẽ là 7 ngày)</td>
<td></td>
</tr>
</tbody></table>
<h1 id='errors' class='h1 font-weight-light'>Errors</h1>
<p>PBX API sử dụng các mã lỗi sau</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Your permission is not allow to access environment.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a API with an invalid method.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

              </article>
            </div>
          </article>
          <!-- / content -->
        </div>
      </div>
    </section>
    <script src="js/vendor.min-085c5346.js"></script>
    <script src="js/app-25d33ffd.js"></script>
    <script>
      jQuery(window).on('activate.bs.scrollspy', function ( e,obj) {
        try{
          let tmp = $(`a[href="${obj.relatedTarget}"]`)
          parentId= tmp.attr("parent-id")
          $(".collapse").removeClass("show")
          $(`#${parentId}`).addClass("show")
        } catch(error){
          console.log(error)
        }
      })
      $("table").addClass("table table-bordered")
      $("table th").addClass("bg-white text-dark font-weight-bold")
      $(".doc-content-body h1").prepend( "<hr/>" ).addClass("text-success font-weight-bold")
      $("p code").addClass("code")
      $("blockquote").each(function(index){
      tmp = $(this)
      $(this).replaceWith(
        `<blockquote><mark> > ${tmp.text()}</mark><blockquote/>`
      )
      })
      $("div.highlight").each(function(index){
      tmp = $(this)
      content = tmp.children("pre")[0]
      title = "Request Example"
      if ($(content).hasClass( "json" )){
      title = "Response Example"
      }
      $(this).replaceWith(
      `
      <div class="accordion accordion-stack mb-2" id="accordion-${index}">
      <div class="card">
      <div class="card-header" id="heading-${index}-1">
        <h5 class="mb-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse-${index}-1" aria-expanded="false" aria-controls="collapse-${index}-1">
            ${title}
          </button>
        </h5>
      </div>
      
      <div id="collapse-${index}-1" class="collapse" aria-labelledby="heading-${index}-1" data-parent="#accordion-${index}">
        <div class="card-body bg-dark">
        <div class="mt-2">
        ${$(content).prop('outerHTML')}
        </div>
        </div>
      </div>
      </div>
      </div>
      `
      )
      })
      $(function () {
        $(".copy-clipboard svg").addClass("btn btn-secondary")
      })
    </script>
  </body>
</html>
