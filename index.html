
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PBX API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-2ede71d7.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-e033bdd3.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
    <link href="images/favicon-639cf3ec.ico" rel="icon" type="image/ico" />
  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-4a7690d9.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#login-account" class="toc-h2 toc-link" data-title="Login Account">Login Account</a>
                  </li>
                  <li>
                    <a href="#get-access-token" class="toc-h2 toc-link" data-title="Get Access Token">Get Access Token</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#event" class="toc-h1 toc-link" data-title="Event">Event</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-events" class="toc-h2 toc-link" data-title="Get Events">Get Events</a>
                  </li>
                  <li>
                    <a href="#create-events" class="toc-h2 toc-link" data-title="Create Events">Create Events</a>
                  </li>
                  <li>
                    <a href="#delete-event" class="toc-h2 toc-link" data-title="Delete Event">Delete Event</a>
                  </li>
                  <li>
                    <a href="#event-hook-data" class="toc-h2 toc-link" data-title="Event Hook Data">Event Hook Data</a>
                  </li>
                  <li>
                    <a href="#note" class="toc-h2 toc-link" data-title="Note*">Note*</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#cdrs-call-detail-records" class="toc-h1 toc-link" data-title="CDRs - Call Detail Records">CDRs - Call Detail Records</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#attributes" class="toc-h2 toc-link" data-title="Attributes">Attributes</a>
                  </li>
                  <li>
                    <a href="#get-cdrs" class="toc-h2 toc-link" data-title="Get CDRs">Get CDRs</a>
                  </li>
                  <li>
                    <a href="#get-a-specific-cdr" class="toc-h2 toc-link" data-title="Get a Specific CDR">Get a Specific CDR</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#click-to-call" class="toc-h1 toc-link" data-title="Click-to-call">Click-to-call</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#synchronous" class="toc-h2 toc-link" data-title="Synchronous">Synchronous</a>
                  </li>
                  <li>
                    <a href="#asynchronous" class="toc-h2 toc-link" data-title="Asynchronous">Asynchronous</a>
                  </li>
                  <li>
                    <a href="#error" class="toc-h2 toc-link" data-title="Error">Error</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#call" class="toc-h1 toc-link" data-title="Call">Call</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-calls" class="toc-h2 toc-link" data-title="List Calls">List Calls</a>
                  </li>
                  <li>
                    <a href="#transfer-a-call" class="toc-h2 toc-link" data-title="Transfer a call">Transfer a call</a>
                  </li>
                  <li>
                    <a href="#listen-a-call" class="toc-h2 toc-link" data-title="Listen a call">Listen a call</a>
                  </li>
                  <li>
                    <a href="#whisper-a-call" class="toc-h2 toc-link" data-title="Whisper a call">Whisper a call</a>
                  </li>
                  <li>
                    <a href="#barge-a-call" class="toc-h2 toc-link" data-title="Barge a call">Barge a call</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#report" class="toc-h1 toc-link" data-title="Report">Report</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#list-call-id" class="toc-h2 toc-link" data-title="List Call Id">List Call Id</a>
                  </li>
                  <li>
                    <a href="#list-call-status" class="toc-h2 toc-link" data-title="List Call Status">List Call Status</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#monitor" class="toc-h1 toc-link" data-title="Monitor">Monitor</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#monitor-agent" class="toc-h2 toc-link" data-title="Monitor Agent">Monitor Agent</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tenant" class="toc-h1 toc-link" data-title="Tenant">Tenant</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-tenant" class="toc-h2 toc-link" data-title="Create Tenant">Create Tenant</a>
                  </li>
                  <li>
                    <a href="#get-tenant-by-id" class="toc-h2 toc-link" data-title="Get Tenant By ID">Get Tenant By ID</a>
                  </li>
                  <li>
                    <a href="#update-tenant" class="toc-h2 toc-link" data-title="Update Tenant">Update Tenant</a>
                  </li>
                  <li>
                    <a href="#create-extension" class="toc-h2 toc-link" data-title="Create Extension">Create Extension</a>
                  </li>
                  <li>
                    <a href="#get-extension-by-ext" class="toc-h2 toc-link" data-title="Get Extension By Ext">Get Extension By Ext</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#template-k-ch-b-n" class="toc-h1 toc-link" data-title="Template - Kịch bản">Template - Kịch bản</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#k-ch-b-n-tts" class="toc-h2 toc-link" data-title="Kịch bản TTS">Kịch bản TTS</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#autocall" class="toc-h1 toc-link" data-title="Autocall">Autocall</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#nh-n-d-li-u-queue" class="toc-h2 toc-link" data-title="Nhận dữ liệu queue">Nhận dữ liệu queue</a>
                  </li>
                  <li>
                    <a href="#import-danh-sach-ch-n" class="toc-h2 toc-link" data-title="Import danh sách chặn">Import danh sách chặn</a>
                  </li>
                  <li>
                    <a href="#stop-queue" class="toc-h2 toc-link" data-title="Stop Queue">Stop Queue</a>
                  </li>
                  <li>
                    <a href="#start-queue" class="toc-h2 toc-link" data-title="Start Queue">Start Queue</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#autodialer" class="toc-h1 toc-link" data-title="Autodialer">Autodialer</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#nh-n-d-li-u-queue-2" class="toc-h2 toc-link" data-title="Nhận dữ liệu queue">Nhận dữ liệu queue</a>
                  </li>
                  <li>
                    <a href="#stop-queue-2" class="toc-h2 toc-link" data-title="Stop Queue">Stop Queue</a>
                  </li>
                  <li>
                    <a href="#start-queue-2" class="toc-h2 toc-link" data-title="Start Queue">Start Queue</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><p>If any problem please contact us</p></li>
            <li><li>Email &#58; tech@tel4vn.com</li></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Xin chào! Đây là bộ API tích hợp tổng đài VoIP - PBX vào các hệ thống CRM, WebApp.</p>

<p>Nếu bạn cần thông tin để tích hợp hoặc cần hỗ trợ vui lòng liên hệ mail: support@tel4vn.com.</p>

<p>Các thông tin như {{API_HOST}}, {{API_KEY}}, tài khoản admin, tài khoản SIP test sẽ được bên phía Tổng đài cung cấp.</p>
<h1 id='authentication'>Authentication</h1><h2 id='login-account'>Login Account</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/auth'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "username" : "foo@test.tel4vn.com",
    "password" : "foo123"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"user_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-bbbb-cccc-dddd-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Login thành công sẽ trả về thông tin account.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/auth</code></p>
<h3 id='body'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>Account&#39;s username</td>
</tr>
<tr>
<td>password</td>
<td>Account&#39;s password</td>
</tr>
</tbody></table>
<h2 id='get-access-token'>Get Access Token</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/auth/token'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "api_key": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeee"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"expired"</span><span class="p">:</span><span class="w"> </span><span class="mi">1613636318</span><span class="p">,</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwiaWF0IjoxNjEzNjMyNzc4fQ.dGhpcyBpcyB0ZXN0IGRhdGE="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>PBX API sử dụng API Token để xác thực truy cập tới API. API Token bạn lấy từ service thông qua {{API_KEY}} được Tổng đài cung cấp.</p>

<p>Tất cả các API của PBX đều yêu cầu user cung cấp Token trong header giống phía dưới.</p>

<p><code>Authorization: Bearer {TOKEN}</code></p>

<aside class="notice">
Bạn vui lòng thay đổi <code>{TOKEN}</code> bằng token đã lấy được.
</aside>
<h3 id='http-request-2'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/auth/token</code></p>
<h3 id='body-2'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api_key</td>
<td>api_key có trong thông tin của account</td>
</tr>
</tbody></table>
<h1 id='event'>Event</h1><h2 id='get-events'>Get Events</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/event'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"event_domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avavavav-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"event_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hangup"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"callback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://webhook.demo/"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"callback_apikey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Trả về các call events của tenant.</p>
<h3 id='http-request-3'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/event</code></p>
<h2 id='create-events'>Create Events</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/event'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "callback_url" : "https://webhook.demo/",
    "callback_apikey" : "foo",
    "event" : "create"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Tạo Event Hook, mỗi lần bắt được {event} tổng đài sẽ hook dữ liệu về {callback_url}.</p>
<h3 id='http-request-4'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/event</code></p>
<h3 id='body-3'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callback_url</td>
<td>Domain Url mà tổng đài sẽ hook dữ liệu tới</td>
</tr>
<tr>
<td>callback_apikey</td>
<td>ApiKey hoặc access token của domain (optional)</td>
</tr>
<tr>
<td>event</td>
<td>SIP Call Event</td>
</tr>
</tbody></table>
<h3 id='sip-call-event'>SIP Call Event</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>hangup</td>
<td>Sự kiện khi cuộc gọi bị ngắt, huỷ</td>
</tr>
<tr>
<td>ringing</td>
<td>Sự kiện khi cuộc gọi được khởi tạo</td>
</tr>
<tr>
<td>answered</td>
<td>Sự kiện khi cuộc gọi được nhấc máy</td>
</tr>
<tr>
<td>cdr</td>
<td>Sự kiện sau khi cdr được tạo xong</td>
</tr>
</tbody></table>

<aside class="danger">Nếu bạn tạo event nằm ngoài các event ở trên, hệ thống sẽ không nhận diện được nên sẽ không hook data về.</aside>

<aside class="warning">Nếu bạn cần hook event ngoài các event ở trên, vui lòng gửi mail hỗ trợ.</aside>
<h2 id='delete-event'>Delete Event</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> DELETE <span class="s1">'https://{{API_HOST}}/v1/event/eeeeeeee-1111-2222-3333-eeeeeeee'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để xoá một event_domain.</p>
<h3 id='http-request-5'>HTTP Request</h3>
<p><code>DELETE https://{{API_HOST}}/v1/event/&lt;ID&gt;</code></p>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>ID của event</td>
</tr>
</tbody></table>
<h2 id='event-hook-data'>Event Hook Data</h2>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avavavav-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hotline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hangup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billsec"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='description'>Description</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>call_id</td>
<td>Id định danh cuộc gọi</td>
</tr>
<tr>
<td>sip_call_id</td>
<td>SIP Call Id</td>
</tr>
<tr>
<td>domain</td>
<td>Domain nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>direction</td>
<td>Hướng cuộc gọi (inbound / outbound)</td>
</tr>
<tr>
<td>from_number</td>
<td>Số gọi. Sẽ là số ext nếu cuộc gọi là outbound</td>
</tr>
<tr>
<td>to_number</td>
<td>Số nhận. Sẽ là số ext nếu cuộc gọi là inbound</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>state</td>
<td>ringing / answered / hangup / cdr</td>
</tr>
<tr>
<td>duration</td>
<td>Tổng thời lượng cuộc gọi. (Riêng sự kiện hangup)</td>
</tr>
<tr>
<td>billsec</td>
<td>Thời lượng tính từ khi hai bên kết nối. (Riêng sự kiện hangup)</td>
</tr>
<tr>
<td>recording_url</td>
<td>URL public để play file ghi âm. (Riêng sự kiện cdr)</td>
</tr>
</tbody></table>
<h2 id='note'>Note*</h2>
<p>Một số thông tin cần lưu ý khi tích hợp event:</p>

<ul>
<li>Event ringing, answered, hangup là các event theo luồng của một cuộc gọi.</li>
<li>Event cdr là event sẽ gửi tới webhook sau khi tổng đài cập nhật CDR.</li>
<li>Đối với các case outbound: call_id của các event sẽ map giống nhau do tồn tại trên một cuộc gọi.</li>
<li>ĐốI với các case inbound:

<ul>
<li>Trường hợp 1 mobile - 1 extension: call_id của các event sẽ map giống nhau do tồn tại trên một cuộc gọi.</li>
<li>Trường hợp 1 mobile - nhiều extension (Ringing, Queue, IVR): call_id của các event ringing, answered, hangup sẽ giống nhau. call_id của event cdr sẽ khác nhau. Do call_id của các event ringing, answered, hangup là call_id xử lý của cuộc gọi trên từng extension, call_id của event cdr là call_id của cả một luồng inbound (Ringing, Queue, IVR).</li>
</ul></li>
</ul>
<h1 id='cdrs-call-detail-records'>CDRs - Call Detail Records</h1>
<p>Lịch sử cuộc gọi</p>
<h3 id='attributes'>Attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id của CDR</td>
</tr>
<tr>
<td>sip_call_id</td>
<td>call_id trong bản tin SIP</td>
</tr>
<tr>
<td>cause</td>
<td>Trạng thái cuộc gọi dựa theo mã phản hồi giao thức SIP. Vd: NORMAL_CLEARING, NO_ANSWER, ...</td>
</tr>
<tr>
<td>duration</td>
<td>Thời hạn thực hiện cuộc gọi.</td>
</tr>
<tr>
<td>direction</td>
<td>Chiều cuộc gọi (inbound, outbound, local)</td>
</tr>
<tr>
<td>recording_url</td>
<td>Đường dẫn file ghi âm cuộc gọi</td>
</tr>
<tr>
<td>extension</td>
<td>Extension nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>from_number</td>
<td>Cuộc gọi từ số nào</td>
</tr>
<tr>
<td>to_number</td>
<td>Cuộc gọi đến số nào</td>
</tr>
<tr>
<td>receive_dest</td>
<td>Ringroup hoặc queue của extension nhận cuộc gọi</td>
</tr>
<tr>
<td>time_started</td>
<td>Thời gian bắt đầu cuộc gọi</td>
</tr>
<tr>
<td>time_answered</td>
<td>Thời gian khi cuộc gọi kết nối</td>
</tr>
<tr>
<td>time_ended</td>
<td>Thời gian kết thúc cuộc gọi</td>
</tr>
<tr>
<td>status</td>
<td>Trạng thái cuộc gọi</td>
</tr>
</tbody></table>
<h2 id='get-cdrs'>Get CDRs</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/cdr?'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Pagination response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"112233aabbccddee.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:35"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:43"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:46"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANSWERED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934 "</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aabbccddee112233.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:20:58"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:21:05"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Scroll response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"112233aabbccddee.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623.wav"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:35"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:43"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:46"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANSWERED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aabbccddee112233.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:20:58"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:21:05"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"scroll_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111222333444aaabbbcccddd=="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Trả về danh sách lịch sử cuộc gọi.
API CDRs sử dụng 2 cơ chế để trả về dữ liệu.
Pagination: Phân trang.
Scroll: Cuộn trang. (Mặc định)</p>

<p>Nếu user cung cấp trong param: page - Số trang, limit - số lượng trả về thì API sẽ trả về dữ liêu theo cơ chế Pagination.</p>
<h3 id='http-request-6'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/cdr</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Khởi tạo cuộc gọi)</td>
<td>2021-02-18 hoặc 2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Khởi tạo cuộc gọi)</td>
<td>2021-02-19 hoặc 2021-02-19 00:00:00</td>
</tr>
<tr>
<td>duration</td>
<td>Thời hạn của cuộc gọi</td>
<td>10</td>
</tr>
<tr>
<td>min_duration</td>
<td>Thời hạn thực hiện cuộc gọi ít nhất.</td>
<td>5 - sẽ lấy CDR có duration lớn hơn 5 giây</td>
</tr>
<tr>
<td>extension</td>
<td>Cuộc gọi từ extension nào</td>
<td>101</td>
</tr>
<tr>
<td>recordingfile</td>
<td>File recording của cuộc gọi</td>
<td>abcd.mp3</td>
</tr>
<tr>
<td>status</td>
<td>Trạng thái cuộc gọi</td>
<td>ANSWERED</td>
</tr>
<tr>
<td>phone</td>
<td>Từ hoặc tới số điện thoại nào</td>
<td>0899888999</td>
</tr>
<tr>
<td>direction</td>
<td>Chiều cuộc gọi (inbound, outbound, local)</td>
<td>outbound</td>
</tr>
<tr>
<td>start_date_ended</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Kết thúc cuộc gọi)</td>
<td>2021-02-18 hoặc 2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date_ended</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Kết thúc cuộc gọi)</td>
<td>2021-02-19 hoặc 2021-02-19 00:00:00</td>
</tr>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>page</td>
<td>Trang. (Pagination)</td>
<td>1</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi query. (offset sẽ thay thế page nếu có data) (Pagination)</td>
<td>0</td>
</tr>
<tr>
<td>scroll_id</td>
<td>Truyền vào sau lần query đầu tiên. (Scroll)</td>
<td>abc123efsds...</td>
</tr>
</tbody></table>
<h2 id='get-a-specific-cdr'>Get a Specific CDR</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/cdr/01b7d166-b564-42ec-80a1-4ad343225934'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aabbccddee112233.."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:20:58"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:21:05"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy một cdr cụ thể.
Id có thể id của CDR hoặc sip_call_id trong bản tin</p>
<h3 id='http-request-7'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/cdr/&lt;ID&gt;</code></p>
<h3 id='url-parameters-2'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>Id của CDR hoặc sip_call_id trong bản tin</td>
</tr>
</tbody></table>
<h1 id='click-to-call'>Click-to-call</h1><h2 id='synchronous'>Synchronous</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/click2call?ext=101&amp;phone=0899098899'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>Nếu Extension đã login thì API Click-to-call Synchronous sẽ chờ tới khi extension nhấc máy hoặc ngắt máy.</p>

<aside class="notice">
Đầu số hotline dùng để gọi ra ngoài bạn vui lòng liên hệ team TEL4VN để được cung cấp và cài đặt.
</aside>
<h3 id='http-request-8'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/click2call?ext=&lt;EXTENSION&gt;&amp;phone=&lt;PHONE&gt;</code></p>
<h3 id='url-parameters-3'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension thực hiện cuộc gọi</td>
<td>true</td>
</tr>
<tr>
<td>phone</td>
<td>Số điện thoại sẽ được gọi tới</td>
<td>true</td>
</tr>
<tr>
<td>src_cid_name</td>
<td>Tên hiển thị trên máy extension. Default: Click2Call</td>
<td>false</td>
</tr>
<tr>
<td>src_cid_number</td>
<td>Số hiển thị trên máy extension. Default: Số của extension</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_name</td>
<td>Tên của số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_number</td>
<td>Số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>auto_answer</td>
<td>Tự động nhấc máy phía extension. Default: false</td>
<td>false</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số hotline để thực hiện cuộc gọi ra ngoài</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='asynchronous'>Asynchronous</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/click2call/async?ext=101&amp;phone=0899098899'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User not registered extension with Softphone or IP Phone"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>API Click-to-call Asynchronous sẽ không chờ tới khi extension nhấc máy hoặc ngắt máy, mà sẽ trả về call_id nếu extension đã login và trả về mã lỗi nếu extension không login.</p>

<aside class="notice">
Đầu số hotline dùng để gọi ra ngoài bạn vui lòng liên hệ team TEL4VN để được cung cấp và cài đặt.
</aside>
<h3 id='http-request-9'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/click2call/async?ext=&lt;EXTENSION&gt;&amp;phone=&lt;PHONE&gt;</code></p>
<h3 id='url-parameters-4'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension thực hiện cuộc gọi</td>
<td>true</td>
</tr>
<tr>
<td>phone</td>
<td>Số điện thoại sẽ được gọi tới</td>
<td>true</td>
</tr>
<tr>
<td>src_cid_name</td>
<td>Tên hiển thị trên máy extension. Default: Click2Call</td>
<td>false</td>
</tr>
<tr>
<td>src_cid_number</td>
<td>Số hiển thị trên máy extension. Default: Số của extension</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_name</td>
<td>Tên của số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_number</td>
<td>Số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>auto_answer</td>
<td>Tự động nhấc máy phía extension. Default: false</td>
<td>false</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số hotline để thực hiện cuộc gọi ra ngoài</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='error'>Error</h2>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>USER_BUSY</td>
<td>Người dùng hiện tại đang bận</td>
</tr>
<tr>
<td>USER_NOT_REGISTERED</td>
<td>Người dùng chưa login Softphone hoặc IP Phone</td>
</tr>
</tbody></table>
<h1 id='call'>Call</h1><h2 id='list-calls'>List Calls</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/report/call_id?end_date=2021-06-01%2000:00:00&amp;start_date=2021-06-01%2023:59:59'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08 17:37:37"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.2.3.4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CS_EXECUTE"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy danh sách các cuộc gọi theo thời gian thực.</p>
<h3 id='http-request-10'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/call</code></p>
<h2 id='transfer-a-call'>Transfer a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/transfer'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện chuyển cuộc gọi sang extension khác.</p>
<h3 id='http-request-11'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/transfer</code></p>
<h3 id='body-4'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
</tr>
</tbody></table>
<h2 id='listen-a-call'>Listen a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/listen'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện nghe lén cuộc gọi của một extension khác.</p>
<h3 id='http-request-12'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/listen</code></p>
<h3 id='body-5'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi</td>
</tr>
</tbody></table>
<h2 id='whisper-a-call'>Whisper a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/whisper'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện cuộc gọi với extension, mobile sẽ không nghe được.</p>
<h3 id='http-request-13'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/whisper</code></p>
<h3 id='body-6'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
</tr>
</tbody></table>
<h2 id='barge-a-call'>Barge a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/barge'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện cuộc gọi 3 bên với extension và mobile.</p>
<h3 id='http-request-14'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/barge</code></p>
<h3 id='body-7'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
</tr>
</tbody></table>
<h1 id='report'>Report</h1><h2 id='list-call-id'>List Call Id</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/report/call_id?end_date=2021-06-01%2000:00:00&amp;start_date=2021-06-01%2023:59:59'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"181ba2e3-4528-4e8c-80b9-2b998af93c5b"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4cCkoEATg8DPFKD7jSOgueuiDCwuxH"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bc018081-0451-4d3b-bb4c-98154b35962f"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4Kh4ppE5xoBrPzqpFiJkVAtZ2BXb2F-s"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date range must be in 24 hours"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy danh sách các call_id và sip_call_id trong khoảng thời gian.</p>
<h3 id='http-request-15'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/report/call_id</code></p>
<h3 id='query-parameters-2'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian</td>
<td>2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian</td>
<td>2021-02-19 00:00:00</td>
</tr>
</tbody></table>
<h2 id='list-call-status'>List Call Status</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/report/call_status?end_date=2021-06-01%2000:00:00&amp;start_date=2021-06-01%2023:59:59'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">15225</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANSWERED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">7161</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1515</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FAILED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">59</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNKNOWN"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">700</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO ANSWER"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">24660</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start_date must be after end_date"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy danh sách các call_id và sip_call_id trong khoảng thời gian.</p>
<h3 id='http-request-16'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/report/call_status</code></p>
<h3 id='query-parameters-3'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian</td>
<td>2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian</td>
<td>2021-02-19 00:00:00</td>
</tr>
</tbody></table>
<h1 id='monitor'>Monitor</h1><h2 id='monitor-agent'>Monitor Agent</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/monitor/agent'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"agent_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test 01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a65480c-8bc7-4d4a-9aae-4488d67bf711"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RINGING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-01 09:30:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899123456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9eb34970-dec2-466d-98c7-9532439be7eb"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01.tel4vn.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"663dec3e-a405-4372-9991-8e6ae9f9788a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"network_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.0.15"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"server_host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.0.1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MicroSIP/3.20.6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41d0f364-79f8-4abb-9834-ee803320ea8d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"agent_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test 02"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"faf6a9ae-c475-4980-8a85-24710ab9d6cd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ONCALL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-01 09:31:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899654321"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9eb34970-dec2-466d-98c7-9532439be7eb"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test02.tel4vn.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"663dec3e-a405-4372-9991-8e6ae9f9788a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"network_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.0.16"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"server_host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.0.1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MicroSIP/3.20.6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56df3364-f377-43d3-b315-db1dc011e4de"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test02"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để monitor agent đang login.</p>

<table><thead>
<tr>
<th>Thông tin</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>Data trả về</td>
</tr>
<tr>
<td>data.user_id</td>
<td>Id của user</td>
</tr>
<tr>
<td>data.username</td>
<td>Username của extension</td>
</tr>
<tr>
<td>data.agent_name</td>
<td>Tên của agent</td>
</tr>
<tr>
<td>data.extension_id</td>
<td>Id của extension</td>
</tr>
<tr>
<td>data.extension</td>
<td>Extension</td>
</tr>
<tr>
<td>data.call_state</td>
<td>Trạng thái cuộc gọi. (RINGING, ONCALL)</td>
</tr>
<tr>
<td>data.call_id</td>
<td>Id của cuộc gọi</td>
</tr>
<tr>
<td>data.call_time</td>
<td>Thời gian bắt đầu của cuộc gọi</td>
</tr>
<tr>
<td>data.destination</td>
<td>Số điện thoại nhận cuộc gọi</td>
</tr>
<tr>
<td>data.direction</td>
<td>Chiều cuộc gọi. (inbound, outbound)</td>
</tr>
<tr>
<td>data.user_agent</td>
<td>Tên, Id thiết bị</td>
</tr>
<tr>
<td>data.domain_id</td>
<td>Id của domain</td>
</tr>
<tr>
<td>data.domain_name</td>
<td>Tên của domain</td>
</tr>
<tr>
<td>data.network_ip</td>
<td>IP của extension</td>
</tr>
<tr>
<td>data.server_host</td>
<td>Host của tổng đài</td>
</tr>
</tbody></table>
<h3 id='http-request-17'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/monitor/agent</code></p>
<h1 id='tenant'>Tenant</h1><h2 id='create-tenant'>Create Tenant</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/tenant'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
  "tenant_id" : test01"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01.tel4vn.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tenant_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{{API_HOST}}/v1/tenant/41d0f364-79f8-4abb-9834-ee803320ea8d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"outbound_proxy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pbx01.tel4vn.com:50061"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50061"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"both"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"wss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wss://pbx01.tel4vn.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5294243b-1ace-45a9-b2ef-d66222cb1729"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcabc123321"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"938b4d25-4b25-4f32-9169-7411734ef990"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-18'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/tenant</code></p>
<h3 id='body-8'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tenant_id</td>
<td>Tenant&#39;id</td>
</tr>
</tbody></table>
<h2 id='get-tenant-by-id'>Get Tenant By ID</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01.tel4vn.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tenant_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{{API_HOST}}/v1/tenant/41d0f364-79f8-4abb-9834-ee803320ea8d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"outbound_proxy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pbx01.tel4vn.com:50061"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50061"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"both"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wss://pbx01.tel4vn.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-19'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/tenant/{{tenant_id}}</code></p>
<h3 id='query-parameters-4'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>tenant_id</td>
<td>Tenant&#39;id</td>
<td>test01</td>
</tr>
</tbody></table>
<h2 id='update-tenant'>Update Tenant</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> PUT <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span><span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "enable" : false
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-20'>HTTP Request</h3>
<p><code>PUT https://{{API_HOST}}/v1/tenant/{{tenant_id}}</code></p>
<h3 id='body-9'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>enable</td>
<td>Active or Deactive tenant</td>
<td>true of false</td>
</tr>
</tbody></table>
<h2 id='create-extension'>Create Extension</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101",
    "pwd" : "123Abc!@#"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"104"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123Abc!@#"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-21'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension</code></p>
<h3 id='body-10'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension</td>
</tr>
<tr>
<td>pwd</td>
<td>Password</td>
</tr>
</tbody></table>
<h2 id='get-extension-by-ext'>Get Extension By Ext</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension/extension/{{ext}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"104"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123Abc!@#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-22'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/tenant/{{tenant_id}}</code></p>
<h3 id='query-parameters-5'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>tenant_id</td>
<td>Tenant&#39;id</td>
<td>test01</td>
</tr>
<tr>
<td>ext</td>
<td>Extension</td>
<td>101</td>
</tr>
</tbody></table>
<h1 id='template-k-ch-b-n'>Template - Kịch bản</h1>
<p>Tốc độ đọc tăng dần từ 0 đến 2. Với 1 là tốc độ đọc bình thường và 2 là tốc độ đọc nhanh nhất.</p>

<p>Các giọng đọc kịch bản đang hỗ trợ</p>

<table><thead>
<tr>
<th>Id</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>north-m-01</td>
<td>Miền Bắc 1 - Giọng nam</td>
</tr>
<tr>
<td>north-f-01</td>
<td>Miền Bắc 1 - Giọng nữ</td>
</tr>
<tr>
<td>north-m-02</td>
<td>Miền Bắc 2 - Giọng nam</td>
</tr>
<tr>
<td>north-f-02</td>
<td>Miền Bắc 2 - Giọng nữ</td>
</tr>
<tr>
<td>south-m-03</td>
<td>Miền Nam 1 - Giọng nam</td>
</tr>
<tr>
<td>south-f-03</td>
<td>Miền Nam 1 - Giọng nữ</td>
</tr>
</tbody></table>
<h2 id='k-ch-b-n-tts'>Kịch bản TTS</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">' http://{API_HOST}/v1/template'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "campaign_id" : "663dec3e-a405-4372-9991-8e6ae9f9788a",
    "name": "thong_bao_no_cuoc_01",
    "content": "Chào bạn {{customer_name}} vui lòng thanh toán khoản nợ {{due_amount}} trước ngày {{due_date}}, vui lòng bấm phím 1 nếu bạn đã thanh toán",
    "voice_type": "tts",
    "enable_option": true,
    "voice_tts": "south-f-03",
    "speed_tts": 1.2,
    "press_options": [
      {
        "press_num": 1,
        "type": "tts",
        "content": "Cám ơn {{customer_name}} đã thanh toán"
      }
    ],
    "exit_sound":{
        "enable": true,
        "voice_type":"tts",
        "content":"Cám ơn {{customer_name}} đã sử dụng"
    },
    "invalid_sound":{
        "enable": true,
        "voice_type":"tts",
        "content":"{{customer_name}} đã nhập sai"
    }
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Tạo kịch bản Text-To-Speech</p>
<h3 id='http-request-23'>HTTP Request</h3>
<p><code>POST http://{API_HOST}/v1/template</code></p>
<h3 id='body-11'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"campaign_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"663dec3e-a405-4372-9991-8e6ae9f9788a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"thong_bao_no_cuoc_01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chào bạn {{key_field_1}} vui lòng thanh toán khoản nợ {{key_field_2}} trước ngày {{key_field_3}}"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"voice_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tts"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"voice_tts"</span><span class="p">:</span><span class="w"> </span><span class="s2">"south-f-03"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"speed_tts"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enable_option"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"press_options"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"press_num"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tts"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{key_field_1}} đã bấm phím một"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"press_num"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tts"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{key_field_1}} đã bấm phím hai"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"exit_sound"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"enable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"voice_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tts"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cám ơn {{key_field_1}} đã sử dụng"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"invalid_sound"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"enable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"voice_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tts"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{key_field_1}} đã nhập sai"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>campaign_id</td>
<td>Kịch bản được gán vào campaign</td>
</tr>
<tr>
<td>name</td>
<td>Tên kịch bản muốn tạo. (Phải là duy nhất)</td>
</tr>
<tr>
<td>key_field_1,2,3</td>
<td>Các từ khoả trong kịch bản</td>
</tr>
<tr>
<td>voice_type</td>
<td>Loại autocall : tts, audio_file</td>
</tr>
<tr>
<td>voice_tts</td>
<td>Giọng đọc kịch bản (Đối với voice_type là tts)</td>
</tr>
<tr>
<td>speed_tts</td>
<td>Tốc độ đọc kịch bản (Đối với voice_type là tts)</td>
</tr>
<tr>
<td>content</td>
<td>Nội dung của kịch bản (Đối với voice_type là tts)</td>
</tr>
<tr>
<td>audio_file</td>
<td>File âm thanh (Đối với voice_type là audio_file)</td>
</tr>
<tr>
<td>enable_option</td>
<td>Xử lý kịch bản kèm phím bấm</td>
</tr>
<tr>
<td>press_options</td>
<td>Danh sách các phím bấm cần xử lý</td>
</tr>
<tr>
<td>press_options.press_num</td>
<td>Phím bấm cần xử lý</td>
</tr>
<tr>
<td>press_options.type</td>
<td>Loại autocall : tts, audio_file</td>
</tr>
<tr>
<td>press_options.type</td>
<td>Loại autocall : tts, audio_file</td>
</tr>
<tr>
<td>exit_sound</td>
<td>Xử lý khi kết thúc kịch bản</td>
</tr>
<tr>
<td>exit_sound.enable</td>
<td>Bật xử lý khi kết thúc kịch bản</td>
</tr>
<tr>
<td>exit_sound.voice_type</td>
<td>Loại autocall : tts, audio_file</td>
</tr>
<tr>
<td>exit_sound.content</td>
<td>Nội dung của kịch bản (Đối với voice_type là tts)</td>
</tr>
<tr>
<td>exit_sound.audio_file</td>
<td>File âm thanh (Đối với voice_type là audio_file)</td>
</tr>
<tr>
<td>invalid_sound</td>
<td>Xử lý khi bấm sai phím trong kịch bản</td>
</tr>
<tr>
<td>invalid_sound.enable</td>
<td>Bật xử lý khi bấm sai phím trong kịch bản</td>
</tr>
<tr>
<td>invalid_sound.voice_type</td>
<td>Loại autocall : tts, audio_file</td>
</tr>
<tr>
<td>invalid_sound.content</td>
<td>Nội dung của kịch bản (Đối với voice_type là tts)</td>
</tr>
<tr>
<td>invalid_sound.audio_file</td>
<td>File âm thanh (Đối với voice_type là audio_file)</td>
</tr>
</tbody></table>

<p>key_field: tương ứng với đoạn text import vào campaign người dùng định nghĩa.</p>

<p>Ví dụ:</p>

<ul>
    <li>key_field_1 là {{customer_name}}</li>
    <li>key_field_2 là {{due_amount}}</li>
    <li>key_field_3 là {{due_date}}</li>
</ul>

<p>Đoạn content sẽ là : &quot;Chào bạn {{customer_name}} vui lòng thanh toán khoản nợ {{due_amount}} trước ngày {{due_date}}&quot;</p>
<h1 id='autocall'>Autocall</h1><h2 id='nh-n-d-li-u-queue'>Nhận dữ liệu queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v1/autocall/queue'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
  "queue_code": "Autocall",
  "template": "Test Autocall",
  "concurrent_call": "5",
  "customers": [
    {
      "id": "TEL4VN_Test",
      "mobiles": ["0899123456"],
      "contract_number": "HD123456",
      "due_date": "2021-07-13"
    }
  ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"fail"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"TEL4VN_Test"</span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"fail"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích nhận thông tin về queue để tiến hành tự động gọi ra theo kịch bản.</p>
<h3 id='http-request-24'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/autocall/queue</code></p>
<h3 id='body-12'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test Autocall"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"concurrent_call"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TEL4VN_Test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mobiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"0899123456"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"contract_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HD123456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"due_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-13"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
<tr>
<td>template</td>
<td>Kịch bản dùng để</td>
<td>x</td>
</tr>
<tr>
<td>concurrent_call</td>
<td>Số lượng cuộc gọi đồng thời</td>
<td></td>
</tr>
<tr>
<td>customers.id</td>
<td>ID của khách hàng</td>
<td>x</td>
</tr>
<tr>
<td>customers.mobiles</td>
<td>Danh sách các số điện thoại của khách hàng</td>
<td>x</td>
</tr>
<tr>
<td>customers.contract_number,due_date</td>
<td>key_field</td>
<td>x</td>
</tr>
</tbody></table>

<p>Một số lưu ý:</p>

<ul>
  <li>Nếu muốn đọc đúng khoản tiền (Không đọc từng số) - truyền dữ liệu theo format: “10.410.000”</li>
  <li>Nếu muốn đọc từng số (Ví dụ số điện thoại) - truyền dữ liệu theo format: 123456789 hoặc “0987654321”</li>
  <li>Nếu muốn đọc thành số (Ví dụ 15 - mười lăm) - truyền dữ liệu theo format: “#15”</li>
  <li>Nếu giá trị của key field là ngày tháng năm - Yêu cầu format “dd/mm/yyyy”, ví dụ: “30/01/2021”</li>
</ul>

<p>customers.key_field: tương ứng với đoạn text import vào campaign người dùng đã định nghĩa.</p>

<p>Ví dụ:</p>

<ul>
  <li>Kịch bản : "Chào bạn {{customer_name}} vui lòng thanh toán khoản nợ {{due_amount}} trước ngày {{due_date}}"</li>
  <li>Nội dung kịch bản sẽ là: “Chào bạn Nguyễn Văn A vui lòng thanh toán khoản nợ mười triệu bốn trăm mười nghìn trước ngày ba mươi tháng một năm hai không hai mươi mốt”</li>
</ul>
<h2 id='import-danh-sach-ch-n'>Import danh sách chặn</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v1/autocall/queue/dnc'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autocall-Q1",
    "customers": [
        {
          "id": "KH_01"
        },
        {
          "id": "KH_02"
        },
        {
          "id": "KH_03"
        }
    ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích cung cấp danh sách các khách hàng cần chặn cuộc gọi lên tổng đài. Tổng đài sẽ loại/bỏ qua các khách hàng này khi quay số nếu chưa quay đến. Nếu đã quay rồi hoặc đang trong cuộc gọi thì giữ nguyên.</p>
<h3 id='http-request-25'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/autocall/queue/dnc</code></p>
<h3 id='body-13'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall-Q1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH_01"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH_02"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KH_03"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
<tr>
<td>customers.id</td>
<td>ID của khách hàng</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='stop-queue'>Stop Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v1/autocall/queue/stop'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autocall-Q1"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu tạm dừng một queue đang thực hiện.</p>
<h3 id='http-request-26'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/autocall/queue/stop</code></p>
<h3 id='body-14'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall-Q1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='start-queue'>Start Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v1/autocall/queue/start'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autocall-Q1"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu tiếp tục một queue đang tạm dừng.</p>
<h3 id='http-request-27'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/autocall/queue/start</code></p>
<h3 id='body-15'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocall-Q1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h1 id='autodialer'>Autodialer</h1><h2 id='nh-n-d-li-u-queue-2'>Nhận dữ liệu queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v1/autodialer/queue'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
  "queue_code": "Autodial",
  "precall_ratio": "150",
  "max_recall_count": "2",
  "queue_agents": "5001",
  "customers": [
    {
      "id": "TEL4VN_Test",
      "mobiles": ["0899123456"],
    }
  ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"campaign is invalid"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích nhận thông tin về queue để tiến hành tự động gọi ra.</p>
<h3 id='http-request-28'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/autodialer/queue</code></p>
<h3 id='body-16'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autodial"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"precall_ratio"</span><span class="p">:</span><span class="w"> </span><span class="s2">"150"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"max_recall_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"queue_agents"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5001"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"customers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TEL4VN_Test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mobiles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"0899123456"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
<tr>
<td>precall_ratio</td>
<td>Kịch bản dùng để</td>
<td>x</td>
</tr>
<tr>
<td>max_recall_count</td>
<td>Số lượng cuộc gọi đồng thời</td>
<td>x</td>
</tr>
<tr>
<td>customers.id</td>
<td>ID của khách hàng</td>
<td>x</td>
</tr>
<tr>
<td>customers.mobiles</td>
<td>Danh sách các số điện thoại của khách hàng</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='stop-queue-2'>Stop Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v1/autodialer/queue/stop'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autodial"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu tạm dừng một queue đang thực hiện.</p>
<h3 id='http-request-29'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/autodialer/queue/stop</code></p>
<h3 id='body-17'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autodial"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='start-queue-2'>Start Queue</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">--location</span> <span class="nt">--request</span> POST <span class="s1">'http://{{API_HOST}}/v1/autodialer/queue/start'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--header</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "queue_code": "Autodial"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"queue not found"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API này nhằm mục đích yêu cầu tiếp tục một queue đang tạm dừng.</p>
<h3 id='http-request-30'>HTTP Request</h3>
<p><code>POST http://{{API_HOST}}/v1/autodialer/queue/start</code></p>
<h3 id='body-18'>Body</h3>
<blockquote>
<p>Sample data:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"queue_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autodial"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>queue_code</td>
<td>Mã queue</td>
<td>x</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>PBX API sử dụng các mã lỗi sau</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Your permission is not allow to access environment.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a API with an invalid method.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
