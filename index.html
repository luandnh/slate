<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>PBX API - TEL4VN</title>
    <script type="text/javascript" id="www-widgetapi-script" src="https://www.youtube.com/s/player/9216d1f7/www-widgetapi.vflset/www-widgetapi.js" async></script>
    <link rel="stylesheet" href="css/style-1f587a25.css">
    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
      <script src="javascripts/all-e033bdd3.js"></script>
    <link href="images/favicon-639cf3ec.ico" rel="icon" type="image/ico" />
  </head>
  <body class="index headroom headroom--top headroom--not-bottom" data-languages="[&quot;shell&quot;]" data-spy="scroll" data-target="#page-nav">
    <!-- header -->
    <header class="header header-sticky header-light" style="background-color: #3bb78f;background-image: linear-gradient(315deg, #3bb78f 0%, #0bab64 74%);">
      <div class="container">
        <div class="row">
          <nav class="navbar navbar-expand-lg navbar-light">
            <a href="#" class="navbar-brand"><img src="images/logo-4a7690d9.png" class="logo" alt="" /></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <ul class="navbar-nav mr-auto"></ul>
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link text-light font-weight-bold" href="https://tongdaivoip.com" target="_blank">Home</a>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link text-light font-weight-bold dropdown-toggle active" href="#" id="dropdown-1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Documentation
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdown-1">
                    <a class="dropdown-item" href="/index.html">PBX API</a>
                    <a class="dropdown-item" href="/autocall.html">Autocall API</a>
                    <a class="dropdown-item" href="/billing.html">Billing API</a>
                    <a class="dropdown-item" href="/callcenter.html">CallCenter v1 API</a>
                  </div>
                </li>
                <li class="nav-item dropdown">
                  <a class="nav-link text-light font-weight-bold dropdown-toggle" href="#" id="dropdown-1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    SDK
                  </a>
                  <div class="dropdown-menu" aria-labelledby="dropdown-1">
                    <a class="dropdown-item" href="https://portal.tel4vn.com" target="_blank">Portal</a>
                    <a class="dropdown-item" href="https://portal.tel4vn.com/docs" target="_blank">Document</a>
                  </div>
                </li>
                <li class="nav-item">
                  <a class="nav-link text-light font-weight-bold" href="mailto:tech@tel4vn.com">Support</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <!-- / header -->
    <section class="pt-5">
      <div class="container-fluid">
        <div class="row justify-content-between">
          <!-- navigation -->
          <aside class="col-lg-3 col-xxl-2 p-3 doc-sidebar">
            <div class="sticky">
              <nav class="navbar navbar-vertical navbar-expand-lg navbar-light">
                <div>
                  <a href="#" class="navbar-brand">
                    <h3>PBX API<span class="badge badge-green ml-2">1.2.1</span></h3>
                  </a>
                  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                  </button>
                </div>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                  <ul id="page-nav" class="nav flex-column nav-vertical-2">
                      <li class="nav-item">
                        <a href="#introduction" class="nav-link" data-title="Introduction" >Introduction</a>
                        <div class="collapse" id="introduction-nav" data-parent="#page-nav">
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#authentication" class="nav-link" data-title="Authentication"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="authentication" data-target="#authentication-nav" >Authentication</a>
                        <div class="collapse" id="authentication-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#login-account" class="nav-link" data-title="Login Account" parent-id="authentication-nav">Login Account</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-access-token" class="nav-link" data-title="Get Access Token" parent-id="authentication-nav">Get Access Token</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#event" class="nav-link" data-title="Event"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="event" data-target="#event-nav" >Event</a>
                        <div class="collapse" id="event-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#get-events" class="nav-link" data-title="Get Events" parent-id="event-nav">Get Events</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#create-events" class="nav-link" data-title="Create Events" parent-id="event-nav">Create Events</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#delete-event" class="nav-link" data-title="Delete Event" parent-id="event-nav">Delete Event</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#event-hook-data" class="nav-link" data-title="Event Hook Data" parent-id="event-nav">Event Hook Data</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#note" class="nav-link" data-title="Note*" parent-id="event-nav">Note*</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#cdrs-call-detail-records" class="nav-link" data-title="CDRs - Call Detail Records"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="cdrs-call-detail-records" data-target="#cdrs-call-detail-records-nav" >CDRs - Call Detail Records</a>
                        <div class="collapse" id="cdrs-call-detail-records-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#attributes" class="nav-link" data-title="Attributes" parent-id="cdrs-call-detail-records-nav">Attributes</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-cdrs" class="nav-link" data-title="Get CDRs" parent-id="cdrs-call-detail-records-nav">Get CDRs</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-a-specific-cdr" class="nav-link" data-title="Get a Specific CDR" parent-id="cdrs-call-detail-records-nav">Get a Specific CDR</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#click-to-call" class="nav-link" data-title="Click-to-call"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="click-to-call" data-target="#click-to-call-nav" >Click-to-call</a>
                        <div class="collapse" id="click-to-call-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#synchronous" class="nav-link" data-title="Synchronous" parent-id="click-to-call-nav">Synchronous</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#asynchronous" class="nav-link" data-title="Asynchronous" parent-id="click-to-call-nav">Asynchronous</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#error" class="nav-link" data-title="Error" parent-id="click-to-call-nav">Error</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#call" class="nav-link" data-title="Call"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="call" data-target="#call-nav" >Call</a>
                        <div class="collapse" id="call-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#list-calls" class="nav-link" data-title="List Calls" parent-id="call-nav">List Calls</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#transfer-a-call" class="nav-link" data-title="Transfer a call" parent-id="call-nav">Transfer a call</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#listen-a-call" class="nav-link" data-title="Listen a call" parent-id="call-nav">Listen a call</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#whisper-a-call" class="nav-link" data-title="Whisper a call" parent-id="call-nav">Whisper a call</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#barge-a-call" class="nav-link" data-title="Barge a call" parent-id="call-nav">Barge a call</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#park-a-call" class="nav-link" data-title="Park a call" parent-id="call-nav">Park a call</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#report" class="nav-link" data-title="Report"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="report" data-target="#report-nav" >Report</a>
                        <div class="collapse" id="report-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#list-call-id" class="nav-link" data-title="List Call Id" parent-id="report-nav">List Call Id</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#list-call-status" class="nav-link" data-title="List Call Status" parent-id="report-nav">List Call Status</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#monitor" class="nav-link" data-title="Monitor"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="monitor" data-target="#monitor-nav" >Monitor</a>
                        <div class="collapse" id="monitor-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#monitor-agent" class="nav-link" data-title="Monitor Agent" parent-id="monitor-nav">Monitor Agent</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#tenant" class="nav-link" data-title="Tenant"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="tenant" data-target="#tenant-nav" >Tenant</a>
                        <div class="collapse" id="tenant-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#create-tenant" class="nav-link" data-title="Create Tenant" parent-id="tenant-nav">Create Tenant</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-tenant-by-id" class="nav-link" data-title="Get Tenant By ID" parent-id="tenant-nav">Get Tenant By ID</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#update-tenant" class="nav-link" data-title="Update Tenant" parent-id="tenant-nav">Update Tenant</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#create-extension" class="nav-link" data-title="Create Extension" parent-id="tenant-nav">Create Extension</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-extensions" class="nav-link" data-title="Get Extensions" parent-id="tenant-nav">Get Extensions</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-extension-by-ext" class="nav-link" data-title="Get Extension By Ext" parent-id="tenant-nav">Get Extension By Ext</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#update-extension-password" class="nav-link" data-title="Update Extension Password" parent-id="tenant-nav">Update Extension Password</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#blacklist" class="nav-link" data-title="Blacklist"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="blacklist" data-target="#blacklist-nav" >Blacklist</a>
                        <div class="collapse" id="blacklist-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#get-blacklists" class="nav-link" data-title="Get Blacklists" parent-id="blacklist-nav">Get Blacklists</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-blacklist-by-id-or-phone" class="nav-link" data-title="Get Blacklist By Id or Phone" parent-id="blacklist-nav">Get Blacklist By Id or Phone</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#insert-blacklists" class="nav-link" data-title="Insert Blacklists" parent-id="blacklist-nav">Insert Blacklists</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#remove-blacklists" class="nav-link" data-title="Remove Blacklists" parent-id="blacklist-nav">Remove Blacklists</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#smart-routing" class="nav-link" data-title="Smart Routing"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="smart-routing" data-target="#smart-routing-nav" >Smart Routing</a>
                        <div class="collapse" id="smart-routing-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#get-smart-routings" class="nav-link" data-title="Get Smart Routings" parent-id="smart-routing-nav">Get Smart Routings</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-smart-routing-by-id-or-phone" class="nav-link" data-title="Get Smart Routing By Id or Phone" parent-id="smart-routing-nav">Get Smart Routing By Id or Phone</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#insert-smart-routing" class="nav-link" data-title="Insert Smart Routing" parent-id="smart-routing-nav">Insert Smart Routing</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#remove-smart-routing" class="nav-link" data-title="Remove Smart Routing" parent-id="smart-routing-nav">Remove Smart Routing</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#voicemail" class="nav-link" data-title="Voicemail"  data-toggle="collapse" role="button" aria-expanded="false" aria-controls="voicemail" data-target="#voicemail-nav" >Voicemail</a>
                        <div class="collapse" id="voicemail-nav" data-parent="#page-nav">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                  <a href="#get-voicemails" class="nav-link" data-title="Get Voicemails" parent-id="voicemail-nav">Get Voicemails</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-voicemail-by-id-or-extension" class="nav-link" data-title="Get Voicemail By Id or Extension" parent-id="voicemail-nav">Get Voicemail By Id or Extension</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#insert-voicemail" class="nav-link" data-title="Insert Voicemail" parent-id="voicemail-nav">Insert Voicemail</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#update-voicemail" class="nav-link" data-title="Update Voicemail" parent-id="voicemail-nav">Update Voicemail</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#remove-voicemail" class="nav-link" data-title="Remove Voicemail" parent-id="voicemail-nav">Remove Voicemail</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-voicemail-messages" class="nav-link" data-title="Get Voicemail Messages" parent-id="voicemail-nav">Get Voicemail Messages</a>
                                </li>
                                <li class="nav-item">
                                  <a href="#get-voicemail-message-by-id" class="nav-link" data-title="Get Voicemail Message By Id" parent-id="voicemail-nav">Get Voicemail Message By Id</a>
                                </li>
                            </ul>
                        </div>
                      </li>
                      <li class="nav-item">
                        <a href="#errors" class="nav-link" data-title="Errors" >Errors</a>
                        <div class="collapse" id="errors-nav" data-parent="#page-nav">
                        </div>
                      </li>
                  </ul>
                </div>
              </nav>
            </div>
          </aside>
          <!-- / navigation -->
          <!-- content -->
          <article class="col-lg-9 col-xxl-10 doc-content">
            <div class="row">
              <div class="col">
                <div class="doc-content-header">
                  <div class="row align-items-center">
                    <div class="col">
                      <nav aria-label="breadcrumb" class="align-items-center">
                        <a href="index.html" class="breadcrumb-back" title="Back"></a>
                        <ol class="breadcrumb d-none d-lg-inline-flex">
                          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                          <li class="breadcrumb-item active" aria-current="page">PBX API</li>
                        </ol>
                      </nav>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row justify-content-between doc-content-body">
              <article class="col-md-9 col-xxl-8">
                <h1 id='introduction' class='h1 font-weight-light'>Introduction</h1>
<p>Xin chào! Đây là bộ API tích hợp tổng đài VoIP - PBX vào các hệ thống CRM, WebApp.</p>

<p>Nếu bạn cần thông tin để tích hợp hoặc cần hỗ trợ vui lòng liên hệ mail: support@tel4vn.com.</p>

<p>Các thông tin như {{API_HOST}}, {{API_KEY}}, tài khoản admin, tài khoản SIP test sẽ được bên phía Tổng đài cung cấp.</p>
<h1 id='authentication' class='h1 font-weight-light'>Authentication</h1><h2 id='login-account' class='h2 font-weight-light'>Login Account</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/auth'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "username" : "foo@test.tel4vn.com",
    "password" : "foo123"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"user_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-bbbb-cccc-dddd-eeeeeeee"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Login thành công sẽ trả về thông tin account.</p>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/auth</code></p>
<h3 id='body' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>Account&#39;s username</td>
</tr>
<tr>
<td>password</td>
<td>Account&#39;s password</td>
</tr>
</tbody></table>
<h2 id='get-access-token' class='h2 font-weight-light'>Get Access Token</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/auth/token'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "api_key": "aaaaaaaa-bbbb-cccc-dddd-eeeeeeee"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"expired"</span><span class="p">:</span><span class="w"> </span><span class="mi">1613636318</span><span class="p">,</span><span class="w">
    </span><span class="nl">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSU0EtT0FFUC0yNTYiLCJlbmMiOiJBMjU2R0NNIiwiaWF0IjoxNjEzNjMyNzc4fQ.dGhpcyBpcyB0ZXN0IGRhdGE="</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>PBX API sử dụng API Token để xác thực truy cập tới API. API Token bạn lấy từ service thông qua {{API_KEY}} được Tổng đài cung cấp.</p>

<p>Tất cả các API của PBX đều yêu cầu user cung cấp Token trong header giống phía dưới.</p>

<p><code>Authorization: Bearer {TOKEN}</code></p>

<div class="alert alert-success alert-dismissible fade show" role="alert">
Bạn vui lòng thay đổi <code>{TOKEN}</code> bằng token đã lấy được.
</div>
<h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/auth/token</code></p>
<h3 id='body-2' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>api_key</td>
<td>api_key có trong thông tin của account</td>
</tr>
</tbody></table>
<h1 id='event' class='h1 font-weight-light'>Event</h1><h2 id='get-events' class='h2 font-weight-light'>Get Events</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/event'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"event_domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avavavav-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"event_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hangup"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"callback_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://webhook.demo/"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"callback_apikey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Trả về các call events của tenant.</p>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/event</code></p>
<h2 id='create-events' class='h2 font-weight-light'>Create Events</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/event'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "callback_url" : "https://webhook.demo/",
    "callback_apikey" : "foo",
    "event" : "create"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Tạo Event Hook, mỗi lần bắt được {event} tổng đài sẽ hook dữ liệu về {callback_url}.</p>
<h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/event</code></p>
<h3 id='body' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callback_url</td>
<td>Domain Url mà tổng đài sẽ hook dữ liệu tới</td>
</tr>
<tr>
<td>callback_apikey</td>
<td>ApiKey hoặc access token của domain (optional)</td>
</tr>
<tr>
<td>event</td>
<td>SIP Call Event</td>
</tr>
</tbody></table>
<h3 id='sip-call-event' class='h3 font-weight-light'>SIP Call Event</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>hangup</td>
<td>Sự kiện khi cuộc gọi bị ngắt, huỷ</td>
</tr>
<tr>
<td>ringing</td>
<td>Sự kiện khi cuộc gọi được khởi tạo</td>
</tr>
<tr>
<td>answered</td>
<td>Sự kiện khi cuộc gọi được nhấc máy</td>
</tr>
<tr>
<td>cdr</td>
<td>Sự kiện sau khi cdr được tạo xong</td>
</tr>
<tr>
<td>missed</td>
<td>Sự kiện khi có cuộc gọi inbound tới nhưng không có extension nào nghe máy</td>
</tr>
<tr>
<td>cdr_autocall</td>
<td>Sự kiện sau khi cdr của autocall được tạo xong</td>
</tr>
</tbody></table>

<div class="alert alert-danger alert-dismissible fade show" role="alert">Nếu bạn tạo event nằm ngoài các event ở trên, hệ thống sẽ không nhận diện được nên sẽ không hook data về.</div>

<div class="alert alert-warning alert-dismissible fade show" role="alert">Nếu bạn cần hook event ngoài các event ở trên, vui lòng gửi mail hỗ trợ.</div>
<h2 id='delete-event' class='h2 font-weight-light'>Delete Event</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> DELETE <span class="s1">'https://{{API_HOST}}/v1/event/eeeeeeee-1111-2222-3333-eeeeeeee'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để xoá một event_domain.</p>
<h3 id='http-request-3' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>DELETE https://{{API_HOST}}/v1/event/&lt;ID&gt;</code></p>
<h3 id='url-parameters' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>ID của event</td>
</tr>
</tbody></table>
<h2 id='event-hook-data' class='h2 font-weight-light'>Event Hook Data</h2>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"avavavav-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dddddddd-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hotline"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hangup"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"billsec"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='description' class='h3 font-weight-light'>Description</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>call_id</td>
<td>Id định danh cuộc gọi</td>
</tr>
<tr>
<td>sip_call_id</td>
<td>SIP Call Id</td>
</tr>
<tr>
<td>domain</td>
<td>Domain nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>direction</td>
<td>Hướng cuộc gọi (inbound / outbound)</td>
</tr>
<tr>
<td>from_number</td>
<td>Số gọi. Sẽ là số ext nếu cuộc gọi là outbound</td>
</tr>
<tr>
<td>to_number</td>
<td>Số nhận. Sẽ là số ext nếu cuộc gọi là inbound</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>state</td>
<td>ringing / answered / hangup / cdr</td>
</tr>
<tr>
<td>duration</td>
<td>Tổng thời lượng cuộc gọi. (Riêng sự kiện hangup)</td>
</tr>
<tr>
<td>billsec</td>
<td>Thời lượng tính từ khi hai bên kết nối. (Riêng sự kiện hangup)</td>
</tr>
<tr>
<td>recording_url</td>
<td>URL public để play file ghi âm. (Riêng sự kiện cdr)</td>
</tr>
<tr>
<td>press_key</td>
<td>Phím bấm của mobile nếu có (Riêng sự kiện cdr_autocall)</td>
</tr>
<tr>
<td>customer_id</td>
<td>Id của customer khi import vào queue (Riêng sự kiện cdr_autocall)</td>
</tr>
</tbody></table>
<h2 id='note' class='h2 font-weight-light'>Note*</h2>
<p>Một số thông tin cần lưu ý khi tích hợp event:</p>

<ul>
<li>Event ringing, answered, hangup là các event theo luồng của một cuộc gọi.</li>
<li>Event cdr là event sẽ gửi tới webhook sau khi tổng đài cập nhật CDR.</li>
<li>Đối với các case outbound: call_id của các event sẽ map giống nhau do tồn tại trên một cuộc gọi.</li>
<li>ĐốI với các case inbound:

<ul>
<li>Trường hợp 1 mobile - 1 extension: call_id của các event sẽ map giống nhau do tồn tại trên một cuộc gọi.</li>
<li>Trường hợp 1 mobile - nhiều extension (Ringing, Queue, IVR): call_id của các event ringing, answered, hangup sẽ giống nhau. call_id của event cdr sẽ khác nhau. Do call_id của các event ringing, answered, hangup là call_id xử lý của cuộc gọi trên từng extension, call_id của event cdr là call_id của cả một luồng inbound (Ringing, Queue, IVR).</li>
</ul></li>
</ul>
<h1 id='cdrs-call-detail-records' class='h1 font-weight-light'>CDRs - Call Detail Records</h1>
<p>Lịch sử cuộc gọi</p>
<h3 id='attributes' class='h3 font-weight-light'>Attributes</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id của CDR</td>
</tr>
<tr>
<td>sip_call_id</td>
<td>call_id trong bản tin SIP</td>
</tr>
<tr>
<td>cause</td>
<td>Trạng thái cuộc gọi dựa theo mã phản hồi giao thức SIP. Vd: NORMAL_CLEARING, NO_ANSWER, ...</td>
</tr>
<tr>
<td>duration</td>
<td>Thời hạn thực hiện cuộc gọi.</td>
</tr>
<tr>
<td>direction</td>
<td>Chiều cuộc gọi (inbound, outbound, local)</td>
</tr>
<tr>
<td>recording_url</td>
<td>Đường dẫn file ghi âm cuộc gọi</td>
</tr>
<tr>
<td>extension</td>
<td>Extension nhận hoặc thực hiện cuộc gọi</td>
</tr>
<tr>
<td>from_number</td>
<td>Cuộc gọi từ số nào</td>
</tr>
<tr>
<td>to_number</td>
<td>Cuộc gọi đến số nào</td>
</tr>
<tr>
<td>receive_dest</td>
<td>Ringroup hoặc queue của extension nhận cuộc gọi</td>
</tr>
<tr>
<td>time_started</td>
<td>Thời gian bắt đầu cuộc gọi</td>
</tr>
<tr>
<td>time_answered</td>
<td>Thời gian khi cuộc gọi kết nối</td>
</tr>
<tr>
<td>time_ended</td>
<td>Thời gian kết thúc cuộc gọi</td>
</tr>
<tr>
<td>status</td>
<td>Trạng thái cuộc gọi</td>
</tr>
</tbody></table>
<h2 id='get-cdrs' class='h2 font-weight-light'>Get CDRs</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/cdr?'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Pagination response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"112233aabbccddee.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:35"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:43"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:46"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANSWERED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934 "</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aabbccddee112233.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:20:58"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:21:05"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Scroll response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ad4c9b90-c071-405a-9723-980d2e5e1623"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"112233aabbccddee.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://recording.demo/ad4c9b90-c071-405a-9723-980d2e5e1623.wav"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:35"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:43"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-17 17:30:46"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANSWERED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aabbccddee112233.."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:20:58"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:21:05"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"scroll_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"111222333444aaabbbcccddd=="</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Trả về danh sách lịch sử cuộc gọi.
API CDRs sử dụng 2 cơ chế để trả về dữ liệu.
Pagination: Phân trang.
Scroll: Cuộn trang. (Mặc định)</p>

<p>Nếu user cung cấp trong param: page - Số trang, limit - số lượng trả về thì API sẽ trả về dữ liêu theo cơ chế Pagination.</p>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/cdr</code></p>
<h3 id='query-parameters' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Khởi tạo cuộc gọi)</td>
<td>2021-02-18 hoặc 2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Khởi tạo cuộc gọi)</td>
<td>2021-02-19 hoặc 2021-02-19 00:00:00</td>
</tr>
<tr>
<td>duration</td>
<td>Thời hạn của cuộc gọi</td>
<td>10</td>
</tr>
<tr>
<td>min_duration</td>
<td>Thời hạn thực hiện cuộc gọi ít nhất.</td>
<td>5 - sẽ lấy CDR có duration lớn hơn 5 giây</td>
</tr>
<tr>
<td>extension</td>
<td>Cuộc gọi từ extension nào</td>
<td>101</td>
</tr>
<tr>
<td>recordingfile</td>
<td>File recording của cuộc gọi</td>
<td>abcd.mp3</td>
</tr>
<tr>
<td>status</td>
<td>Trạng thái cuộc gọi</td>
<td>ANSWERED</td>
</tr>
<tr>
<td>phone</td>
<td>Từ hoặc tới số điện thoại nào</td>
<td>0899888999</td>
</tr>
<tr>
<td>direction</td>
<td>Chiều cuộc gọi (inbound, outbound, local)</td>
<td>outbound</td>
</tr>
<tr>
<td>start_date_ended</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Kết thúc cuộc gọi)</td>
<td>2021-02-18 hoặc 2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date_ended</td>
<td>Tìm kiếm cdrs theo khoảng thời gian (Kết thúc cuộc gọi)</td>
<td>2021-02-19 hoặc 2021-02-19 00:00:00</td>
</tr>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>page</td>
<td>Trang. (Pagination)</td>
<td>1</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi query. (offset sẽ thay thế page nếu có data) (Pagination)</td>
<td>0</td>
</tr>
<tr>
<td>scroll_id</td>
<td>Truyền vào sau lần query đầu tiên. (Scroll)</td>
<td>abc123efsds...</td>
</tr>
</tbody></table>
<h2 id='get-a-specific-cdr' class='h2 font-weight-light'>Get a Specific CDR</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/cdr/01b7d166-b564-42ec-80a1-4ad343225934'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aabbccddee112233.."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cause"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NORMAL_CLEARING"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
  </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"recording_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"from_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"19001919"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"to_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899888999"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"receive_dest"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_started"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:20:58"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_answered"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"time_ended"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-02-18 17:21:05"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy một cdr cụ thể.
Id có thể id của CDR hoặc sip_call_id trong bản tin</p>
<h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/cdr/&lt;ID&gt;</code></p>
<h3 id='url-parameters' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>Id của CDR hoặc sip_call_id trong bản tin</td>
</tr>
</tbody></table>
<h1 id='click-to-call' class='h1 font-weight-light'>Click-to-call</h1><h2 id='synchronous' class='h2 font-weight-light'>Synchronous</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/click2call?ext=101&amp;phone=0899098899'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>Nếu Extension đã login thì API Click-to-call Synchronous sẽ chờ tới khi extension nhấc máy hoặc ngắt máy.</p>

<div class="alert alert-success alert-dismissible fade show" role="alert">
Đầu số hotline dùng để gọi ra ngoài bạn vui lòng liên hệ team TEL4VN để được cung cấp và cài đặt.
</div>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/click2call?ext=&lt;EXTENSION&gt;&amp;phone=&lt;PHONE&gt;</code></p>
<h3 id='url-parameters' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension thực hiện cuộc gọi</td>
<td>true</td>
</tr>
<tr>
<td>phone</td>
<td>Số điện thoại sẽ được gọi tới</td>
<td>true</td>
</tr>
<tr>
<td>src_cid_name</td>
<td>Tên hiển thị trên máy extension. Default: Click2Call</td>
<td>false</td>
</tr>
<tr>
<td>src_cid_number</td>
<td>Số hiển thị trên máy extension. Default: Số của extension</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_name</td>
<td>Tên của số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_number</td>
<td>Số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>auto_answer</td>
<td>Tự động nhấc máy phía extension. Default: false</td>
<td>false</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số hotline để thực hiện cuộc gọi ra ngoài</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='asynchronous' class='h2 font-weight-light'>Asynchronous</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/click2call/async?ext=101&amp;phone=0899098899'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User not registered extension with Softphone or IP Phone"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>API Click-to-call Asynchronous sẽ không chờ tới khi extension nhấc máy hoặc ngắt máy, mà sẽ trả về call_id nếu extension đã login và trả về mã lỗi nếu extension không login.</p>

<div class="alert alert-success alert-dismissible fade show" role="alert">
Đầu số hotline dùng để gọi ra ngoài bạn vui lòng liên hệ team TEL4VN để được cung cấp và cài đặt.
</div>
<h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/click2call/async?ext=&lt;EXTENSION&gt;&amp;phone=&lt;PHONE&gt;</code></p>
<h3 id='url-parameters-2' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension thực hiện cuộc gọi</td>
<td>true</td>
</tr>
<tr>
<td>phone</td>
<td>Số điện thoại sẽ được gọi tới</td>
<td>true</td>
</tr>
<tr>
<td>src_cid_name</td>
<td>Tên hiển thị trên máy extension. Default: Click2Call</td>
<td>false</td>
</tr>
<tr>
<td>src_cid_number</td>
<td>Số hiển thị trên máy extension. Default: Số của extension</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_name</td>
<td>Tên của số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_number</td>
<td>Số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>auto_answer</td>
<td>Tự động nhấc máy phía extension. Default: false</td>
<td>false</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số hotline để thực hiện cuộc gọi ra ngoài</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='error' class='h2 font-weight-light'>Error</h2>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>USER_BUSY</td>
<td>Người dùng hiện tại đang bận</td>
</tr>
<tr>
<td>USER_NOT_REGISTERED</td>
<td>Người dùng chưa login Softphone hoặc IP Phone</td>
</tr>
</tbody></table>
<h1 id='call' class='h1 font-weight-light'>Call</h1><h2 id='list-calls' class='h2 font-weight-light'>List Calls</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/call'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test.tel4vn.com"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"created_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08 17:37:37"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899123456"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.2.3.4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CS_EXECUTE"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy danh sách các cuộc gọi theo thời gian thực.</p>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/call</code></p>
<h2 id='transfer-a-call' class='h2 font-weight-light'>Transfer a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/transfer'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101",
    "legs" : "bleg"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện chuyển cuộc gọi sang extension khác.</p>
<h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/transfer</code></p>
<h3 id='body' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
<td>x</td>
</tr>
<tr>
<td>legs</td>
<td>aleg hoặc bleg. aleg có thể hiểu là bên thực hiện cuộc gọi, bleg là bên nhận cuộc gọi</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='listen-a-call' class='h2 font-weight-light'>Listen a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/listen'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện nghe lén cuộc gọi của một extension khác.</p>
<h3 id='http-request-3' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/listen</code></p>
<h3 id='body-2' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi</td>
</tr>
</tbody></table>
<h2 id='whisper-a-call' class='h2 font-weight-light'>Whisper a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/whisper'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện cuộc gọi với extension, mobile sẽ không nghe được.</p>
<h3 id='http-request-4' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/whisper</code></p>
<h3 id='body-3' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
</tr>
</tbody></table>
<h2 id='barge-a-call' class='h2 font-weight-light'>Barge a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/barge'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện cuộc gọi 3 bên với extension và mobile.</p>
<h3 id='http-request-5' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/barge</code></p>
<h3 id='body-4' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Ext nhận cuộc gọi mới</td>
</tr>
</tbody></table>
<h2 id='park-a-call' class='h2 font-weight-light'>Park a call</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/call/01b7d166-b564-42ec-80a1-4ad343225934/park'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "legs" : "aleg"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để ngắt một bên cuộc gọi và cho bên còn lại chờ tới khi có cuộc gọi transfer tới hoặc sau 10s sẽ tự động ngắt.</p>
<h3 id='http-request-6' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/call/&lt;CALL_ID&gt;/park</code></p>
<h3 id='body-5' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>legs</td>
<td>aleg hoặc bleg. aleg có thể hiểu là bên thực hiện cuộc gọi, bleg là bên nhận cuộc gọi</td>
<td>x</td>
</tr>
</tbody></table>
<h1 id='report' class='h1 font-weight-light'>Report</h1><h2 id='list-call-id' class='h2 font-weight-light'>List Call Id</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/report/call_id?end_date=2021-06-01%2000:00:00&amp;start_date=2021-06-01%2023:59:59'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"181ba2e3-4528-4e8c-80b9-2b998af93c5b"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.4cCkoEATg8DPFKD7jSOgueuiDCwuxH"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
          </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bc018081-0451-4d3b-bb4c-98154b35962f"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"sip_call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4Kh4ppE5xoBrPzqpFiJkVAtZ2BXb2F-s"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"date range must be in 24 hours"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy danh sách các call_id và sip_call_id trong khoảng thời gian.</p>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/report/call_id</code></p>
<h3 id='query-parameters' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian</td>
<td>2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian</td>
<td>2021-02-19 00:00:00</td>
</tr>
</tbody></table>
<h2 id='list-call-status' class='h2 font-weight-light'>List Call Status</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/report/call_status?end_date=2021-06-01%2000:00:00&amp;start_date=2021-06-01%2023:59:59'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">15225</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ANSWERED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">7161</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BUSY"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1515</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FAILED"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">59</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UNKNOWN"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">700</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NO ANSWER"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">24660</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"start_date must be after end_date"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để lấy danh sách các call_id và sip_call_id trong khoảng thời gian.</p>
<h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/report/call_status</code></p>
<h3 id='query-parameters-2' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>start_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian</td>
<td>2021-02-18 17:20:58</td>
</tr>
<tr>
<td>end_date</td>
<td>Tìm kiếm cdrs theo khoảng thời gian</td>
<td>2021-02-19 00:00:00</td>
</tr>
</tbody></table>
<h1 id='monitor' class='h1 font-weight-light'>Monitor</h1><h2 id='monitor-agent' class='h2 font-weight-light'>Monitor Agent</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/monitor/agent'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"agent_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test 01"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6a65480c-8bc7-4d4a-9aae-4488d67bf711"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RINGING"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-01 09:30:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899123456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9eb34970-dec2-466d-98c7-9532439be7eb"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01.tel4vn.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"663dec3e-a405-4372-9991-8e6ae9f9788a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"network_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.0.15"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"server_host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.0.1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MicroSIP/3.20.6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41d0f364-79f8-4abb-9834-ee803320ea8d"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"agent_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Test 02"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"faf6a9ae-c475-4980-8a85-24710ab9d6cd"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ONCALL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"call_time"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-07-01 09:31:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"destination"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899654321"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"direction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"outbound"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9eb34970-dec2-466d-98c7-9532439be7eb"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"domain_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test02.tel4vn.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"663dec3e-a405-4372-9991-8e6ae9f9788a"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"network_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.0.16"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"server_host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10.0.0.1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MicroSIP/3.20.6"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"56df3364-f377-43d3-b315-db1dc011e4de"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test02"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để monitor agent đang login.</p>

<table><thead>
<tr>
<th>Thông tin</th>
<th>Mô tả</th>
</tr>
</thead><tbody>
<tr>
<td>data</td>
<td>Data trả về</td>
</tr>
<tr>
<td>data.user_id</td>
<td>Id của user</td>
</tr>
<tr>
<td>data.username</td>
<td>Username của extension</td>
</tr>
<tr>
<td>data.agent_name</td>
<td>Tên của agent</td>
</tr>
<tr>
<td>data.extension_id</td>
<td>Id của extension</td>
</tr>
<tr>
<td>data.extension</td>
<td>Extension</td>
</tr>
<tr>
<td>data.call_state</td>
<td>Trạng thái cuộc gọi. (RINGING, ONCALL)</td>
</tr>
<tr>
<td>data.call_id</td>
<td>Id của cuộc gọi</td>
</tr>
<tr>
<td>data.call_time</td>
<td>Thời gian bắt đầu của cuộc gọi</td>
</tr>
<tr>
<td>data.destination</td>
<td>Số điện thoại nhận cuộc gọi</td>
</tr>
<tr>
<td>data.direction</td>
<td>Chiều cuộc gọi. (inbound, outbound)</td>
</tr>
<tr>
<td>data.user_agent</td>
<td>Tên, Id thiết bị</td>
</tr>
<tr>
<td>data.domain_id</td>
<td>Id của domain</td>
</tr>
<tr>
<td>data.domain_name</td>
<td>Tên của domain</td>
</tr>
<tr>
<td>data.network_ip</td>
<td>IP của extension</td>
</tr>
<tr>
<td>data.server_host</td>
<td>Host của tổng đài</td>
</tr>
</tbody></table>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/monitor/agent</code></p>
<h1 id='tenant' class='h1 font-weight-light'>Tenant</h1><h2 id='create-tenant' class='h2 font-weight-light'>Create Tenant</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/tenant'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
  "tenant_id" : test01"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01.tel4vn.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"tenant_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{{API_HOST}}/v1/tenant/41d0f364-79f8-4abb-9834-ee803320ea8d"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"outbound_proxy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pbx01.tel4vn.com:50061"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50061"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"transports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"both"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"wss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wss://pbx01.tel4vn.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"api_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5294243b-1ace-45a9-b2ef-d66222cb1729"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"group"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcabc123321"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"938b4d25-4b25-4f32-9169-7411734ef990"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"username"</span><span class="p">:</span><span class="w"> </span><span class="s2">"admin"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/tenant</code></p>
<h3 id='body' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>tenant_id</td>
<td>Tenant&#39;id</td>
</tr>
</tbody></table>
<h2 id='get-tenant-by-id' class='h2 font-weight-light'>Get Tenant By ID</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test01.tel4vn.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"tenant_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://{{API_HOST}}/v1/tenant/41d0f364-79f8-4abb-9834-ee803320ea8d"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"outbound_proxy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pbx01.tel4vn.com:50061"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"port"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50061"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"transports"</span><span class="p">:</span><span class="w"> </span><span class="s2">"both"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"wss"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wss://pbx01.tel4vn.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/tenant/{{tenant_id}}</code></p>
<h3 id='query-parameters' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>tenant_id</td>
<td>Tenant&#39;id</td>
<td>test01</td>
</tr>
</tbody></table>
<h2 id='update-tenant' class='h2 font-weight-light'>Update Tenant</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> PUT <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span><span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "enable" : false
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>PUT https://{{API_HOST}}/v1/tenant/{{tenant_id}}</code></p>
<h3 id='body-2' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>enable</td>
<td>Active or Deactive tenant</td>
<td>true of false</td>
</tr>
</tbody></table>
<h2 id='create-extension' class='h2 font-weight-light'>Create Extension</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "ext" : "101",
    "pwd" : "123Abc!@#"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"created"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"104"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"pwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123Abc!@#"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-4' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension</code></p>
<h3 id='body-3' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension</td>
</tr>
<tr>
<td>pwd</td>
<td>Password</td>
</tr>
</tbody></table>
<h2 id='get-extensions' class='h2 font-weight-light'>Get Extensions</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension?limit=2&amp;offset=0'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123Abc!@#"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"pwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123Abc!@#"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-5' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension</code></p>
<h3 id='query-parameters-2' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>tenant_id</td>
<td>Tenant&#39;id</td>
<td>test01</td>
</tr>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi lấy</td>
<td>0</td>
</tr>
</tbody></table>
<h2 id='get-extension-by-ext' class='h2 font-weight-light'>Get Extension By Ext</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension/{{ext}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"ext"</span><span class="p">:</span><span class="w"> </span><span class="s2">"104"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"pwd"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123Abc!@#"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-6' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension/{{ext}}</code></p>
<h3 id='query-parameters-3' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>tenant_id</td>
<td>Tenant&#39;id</td>
<td>test01</td>
</tr>
<tr>
<td>ext</td>
<td>Extension</td>
<td>101</td>
</tr>
</tbody></table>
<h2 id='update-extension-password' class='h2 font-weight-light'>Update Extension Password</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> PUT <span class="s1">'https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension/{{ext}}/password'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{SECRET_TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "pwd" : "123Abc!@#"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-7' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>PUT https://{{API_HOST}}/v1/tenant/{{tenant_id}}/extension/{{ext}}/password</code></p>
<h3 id='query-parameters-4' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>tenant_id</td>
<td>Tenant&#39;id</td>
<td>test01</td>
</tr>
<tr>
<td>ext</td>
<td>Extension</td>
<td>101</td>
</tr>
</tbody></table>
<h3 id='body-4' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pwd</td>
<td>Password</td>
</tr>
</tbody></table>
<h1 id='blacklist' class='h1 font-weight-light'>Blacklist</h1><h2 id='get-blacklists' class='h2 font-weight-light'>Get Blacklists</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/blacklist'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899990988"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"spam"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-bbbb-cccc-dddd-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899990989"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dnc"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/blaclist</code></p>
<h3 id='query-parameters' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi query</td>
<td>0</td>
</tr>
</tbody></table>
<h2 id='get-blacklist-by-id-or-phone' class='h2 font-weight-light'>Get Blacklist By Id or Phone</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/blacklist/0899990988'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899990988"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"spam"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/blacklist/{{id}}</code></p>
<h3 id='query-parameters-2' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id của blacklist hoặc số điện thoại</td>
</tr>
</tbody></table>
<h2 id='insert-blacklists' class='h2 font-weight-light'>Insert Blacklists</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/blacklist'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "blacklist":[
        {
          "phone_number": "0899990988",
          "description": "spam"
        },
        {
          "phone_number": "0899990989",
          "description": "dnc"
        }
    ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"fail"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"0899990988"</span><span class="p">:</span><span class="w"> </span><span class="s2">"phone_number is duplicate"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"0899990989"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/blacklist</code></p>
<h3 id='body' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>blacklist</td>
<td>Danh sách số điện thoại</td>
<td>x</td>
</tr>
<tr>
<td>blacklist.phone_number</td>
<td>Số điện thoại</td>
<td>x</td>
</tr>
<tr>
<td>blacklist.description</td>
<td>Chú thích</td>
<td></td>
</tr>
</tbody></table>
<h2 id='remove-blacklists' class='h2 font-weight-light'>Remove Blacklists</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> DELETE <span class="s1">'https://{{API_HOST}}/v1/blacklist'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "blacklist":[
      "0899990988",
      "0899990989"
    ]
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"fail"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"success"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"0899990988"</span><span class="p">,</span><span class="w"> </span><span class="s2">"0899990989"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-4' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>DELETE https://{{API_HOST}}/v1/blacklist</code></p>
<h3 id='body-2' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>blacklist</td>
<td>Danh sách số điện thoại</td>
<td>x</td>
</tr>
</tbody></table>
<h1 id='smart-routing' class='h1 font-weight-light'>Smart Routing</h1><h2 id='get-smart-routings' class='h2 font-weight-light'>Get Smart Routings</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/smartrouting'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899990988"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-06 10:00:00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
      </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899990989"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-06 10:00:01"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/smartrouting</code></p>
<h3 id='query-parameters' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi query</td>
<td>0</td>
</tr>
</tbody></table>
<h2 id='get-smart-routing-by-id-or-phone' class='h2 font-weight-light'>Get Smart Routing By Id or Phone</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/smartrouting/0899990988'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899990988"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-06 10:00:00"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/smartrouting/{{id}}</code></p>
<h3 id='query-parameters-2' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id hoặc số điện thoại</td>
</tr>
</tbody></table>
<h2 id='insert-smart-routing' class='h2 font-weight-light'>Insert Smart Routing</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/smartrouting'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
  "agent" : "104",
  "phone_number" : "0899990988"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0899990988"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"104"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-06 10:00:00"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thêm hoặc cập nhật định tuyến thông minh, cuộc gọi inbound sẽ kiểm tra nếu số điện thoại có trong API thì sẽ tự động đưa tới extension, nếu không tồn tại sẽ xử lý tiếp tục theo rule đã set.</p>

<p>Nếu số điện thoại đã tồn tại thì khi gọi API sẽ tự động update.</p>
<h3 id='http-request-3' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/smartrouting</code></p>
<h3 id='body' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>phone_number</td>
<td>Số điện thoại</td>
<td>x</td>
</tr>
<tr>
<td>agent</td>
<td>Extension nhận cuộc gọi gần nhất</td>
<td>x</td>
</tr>
</tbody></table>
<h2 id='remove-smart-routing' class='h2 font-weight-light'>Remove Smart Routing</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> DELETE <span class="s1">'https://{{API_HOST}}/v1/smartrouting/{{id}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-4' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>DELETE https://{{API_HOST}}/v1/smartrouting/{{id}}</code></p>
<h3 id='query-parameters-3' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id hoặc số điện thoại</td>
</tr>
</tbody></table>
<h1 id='voicemail' class='h1 font-weight-light'>Voicemail</h1><h2 id='get-voicemails' class='h2 font-weight-light'>Get Voicemails</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/voicemail'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123def"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mail_to"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"local_after_email"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"For Tech"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-ffffffff"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123def"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"mail_to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tech@tel4vn.com"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"local_after_email"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"For Tech"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/voicemail</code></p>
<h3 id='query-parameters' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi query</td>
<td>0</td>
</tr>
</tbody></table>
<h2 id='get-voicemail-by-id-or-extension' class='h2 font-weight-light'>Get Voicemail By Id or Extension</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/voicemail/aaaaaaaa-1111-2222-3333-eeeeeeee'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123def"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mail_to"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="nl">"local_after_email"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"For Tech"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/voicemail/{{id}}</code></p>
<h3 id='query-parameters-2' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id hoặc Extension</td>
</tr>
</tbody></table>
<h2 id='insert-voicemail' class='h2 font-weight-light'>Insert Voicemail</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> POST <span class="s1">'https://{{API_HOST}}/v1/voicemail'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "extension": "102",
    "password": "abc123def",
    "mail_to": "tech@tel4vn.com",
    "local_after_email": true,
    "enabled": true,
    "description": "For Tech"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-ffffffff"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"password"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123def"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"mail_to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tech@tel4vn.com"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"local_after_email"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"For Tech"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-3' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>POST https://{{API_HOST}}/v1/voicemail</code></p>
<h3 id='body' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>extension</td>
<td>Extension</td>
<td>x</td>
</tr>
<tr>
<td>password</td>
<td>Mật khẩu voicemail</td>
<td>x</td>
</tr>
<tr>
<td>enabled</td>
<td>true hoặc false</td>
<td>x</td>
</tr>
<tr>
<td>local_after_email</td>
<td>Lưu file âm thanh sau khi gửi mail (true hoặc false)</td>
<td></td>
</tr>
<tr>
<td>mail_to</td>
<td>Email nhận khi có voicemail</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>Mô tả nếu có</td>
<td></td>
</tr>
</tbody></table>
<h2 id='update-voicemail' class='h2 font-weight-light'>Update Voicemail</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> PUT <span class="s1">'https://{{API_HOST}}/v1/voicemail/{{id}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span> <span class="se">\</span>
<span class="nt">--data-raw</span> <span class="s1">'{
    "password": "abc123def",
    "mail_to": "tech@tel4vn.com",
    "local_after_email": true,
    "enabled": true,
    "description": "For Tech"
}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-4' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>PUT https://{{API_HOST}}/v1/voicemail/{{id}}</code></p>
<h3 id='query-parameters-3' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id hoặc Extension</td>
</tr>
</tbody></table>
<h3 id='body-2' class='h3 font-weight-light'>Body</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>password</td>
<td>Mật khẩu voicemail</td>
<td>x</td>
</tr>
<tr>
<td>enabled</td>
<td>true hoặc false</td>
<td>x</td>
</tr>
<tr>
<td>local_after_email</td>
<td>Lưu file âm thanh sau khi gửi mail (true hoặc false)</td>
<td></td>
</tr>
<tr>
<td>mail_to</td>
<td>Email nhận khi có voicemail</td>
<td></td>
</tr>
<tr>
<td>description</td>
<td>Mô tả nếu có</td>
<td></td>
</tr>
</tbody></table>
<h2 id='remove-voicemail' class='h2 font-weight-light'>Remove Voicemail</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> DELETE <span class="s1">'https://{{API_HOST}}/v1/voicemail/{{id}}'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"successfully"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-5' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>DELETE https://{{API_HOST}}/v1/voicemail/{{id}}</code></p>
<h3 id='query-parameters-4' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id hoặc Extension</td>
</tr>
</tbody></table>
<h2 id='get-voicemail-messages' class='h2 font-weight-light'>Get Voicemail Messages</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/voicemail/message'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-27T11:13:44+07:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"caller_id_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0891234567"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"caller_id_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0891234567"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"download_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://pbx01.tel4vn.com/v1/voicemail/message/aaaaaaaa-1111-2222-3333-eeeeeeee/download"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-2222-2222-3333-ffffffff"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-27T15:13:44+07:00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"caller_id_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0891234567"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"caller_id_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0891234567"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
      </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"download_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://pbx01.tel4vn.com/v1/voicemail/message/aaaaaaaa-2222-2222-3333-ffffffff/download"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="nl">"offset"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-6' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/voicemail/message</code></p>
<h3 id='query-parameters-5' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead><tbody>
<tr>
<td>limit</td>
<td>Số lượng record trả về</td>
<td>50</td>
</tr>
<tr>
<td>offset</td>
<td>Vị trí bắt đầu khi query</td>
<td>0</td>
</tr>
<tr>
<td>extension</td>
<td>Tìm theo extension</td>
<td>101</td>
</tr>
</tbody></table>
<h2 id='get-voicemail-message-by-id' class='h2 font-weight-light'>Get Voicemail Message By Id</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/voicemail/message/aaaaaaaa-1111-2222-3333-eeeeeeee'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aaaaaaaa-1111-2222-3333-eeeeeeee"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-08-27T11:13:44+07:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"caller_id_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0891234567"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"caller_id_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0891234567"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
  </span><span class="nl">"extension"</span><span class="p">:</span><span class="w"> </span><span class="s2">"102"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"download_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://pbx01.tel4vn.com/v1/voicemail/message/aaaaaaaa-1111-2222-3333-ffffffff/download"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><h3 id='http-request-7' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/voicemail/message/{{id}}</code></p>
<h3 id='query-parameters-6' class='h3 font-weight-light'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>Id hoặc Extension</td>
</tr>
</tbody></table>
<h1 id='errors' class='h1 font-weight-light'>Errors</h1>
<p>PBX API sử dụng các mã lỗi sau</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- Your permission is not allow to access environment.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a API with an invalid method.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

              </article>
            </div>
          </article>
          <!-- / content -->
        </div>
      </div>
    </section>
    <script src="js/vendor.min-085c5346.js"></script>
    <script src="js/app-25d33ffd.js"></script>
    <script>
      jQuery(window).on('activate.bs.scrollspy', function ( e,obj) {
        try{
          let tmp = $(`a[href="${obj.relatedTarget}"]`)
          parentId= tmp.attr("parent-id")
          $(".collapse").removeClass("show")
          $(`#${parentId}`).addClass("show")
        } catch(error){
          console.log(error)
        }
      })
      $("table").addClass("table table-bordered")
      $("table th").addClass("bg-white text-dark font-weight-bold")
      $(".doc-content-body h1").addClass("text-success font-weight-bold")
      $("blockquote").each(function(index){
      tmp = $(this)
      $(this).replaceWith(
        `<blockquote><mark> > ${tmp.text()}</mark><blockquote/>`
      )
      })
      $("div.highlight").each(function(index){
      tmp = $(this)
      content = tmp.children("pre")[0]
      title = "Request Example"
      if ($(content).hasClass( "json" )){
      title = "Response Example"
      }
      $(this).replaceWith(
      `
      <div class="accordion accordion-stack mb-2" id="accordion-${index}">
      <div class="card">
      <div class="card-header" id="heading-${index}-1">
        <h5 class="mb-0">
          <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse-${index}-1" aria-expanded="false" aria-controls="collapse-${index}-1">
            ${title}
          </button>
        </h5>
      </div>
      
      <div id="collapse-${index}-1" class="collapse" aria-labelledby="heading-${index}-1" data-parent="#accordion-${index}">
        <div class="card-body bg-dark">
        <div class="mt-2">
        ${$(content).prop('outerHTML')}
        </div>
        </div>
      </div>
      </div>
      </div>
      `
      )
      })
    </script>
  </body>
</html>
