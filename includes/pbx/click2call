<h1 id='click-to-call' class='h1 font-weight-light'>Click-to-call</h1><h2 id='synchronous' class='h2 font-weight-light'>Synchronous</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/click2call?ext=101&amp;phone=0899098899'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>Nếu Extension đã login thì API Click-to-call Synchronous sẽ chờ tới khi extension nhấc máy hoặc ngắt máy.</p>

<div class="alert alert-success alert-dismissible fade show" role="alert">
Đầu số hotline dùng để gọi ra ngoài bạn vui lòng liên hệ team TEL4VN để được cung cấp và cài đặt.
</div>
<h3 id='http-request' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/click2call?ext=&lt;EXTENSION&gt;&amp;phone=&lt;PHONE&gt;</code></p>
<h3 id='url-parameters' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension thực hiện cuộc gọi</td>
<td>true</td>
</tr>
<tr>
<td>phone</td>
<td>Số điện thoại sẽ được gọi tới</td>
<td>true</td>
</tr>
<tr>
<td>src_cid_name</td>
<td>Tên hiển thị trên máy extension. Default: Click2Call</td>
<td>false</td>
</tr>
<tr>
<td>src_cid_number</td>
<td>Số hiển thị trên máy extension. Default: Số của extension</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_name</td>
<td>Tên của số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_number</td>
<td>Số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>auto_answer</td>
<td>Tự động nhấc máy phía extension. Default: false</td>
<td>false</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số hotline để thực hiện cuộc gọi ra ngoài</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='asynchronous' class='h2 font-weight-light'>Asynchronous</h2><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-L</span> <span class="nt">-X</span> GET <span class="s1">'https://{{API_HOST}}/v1/click2call/async?ext=101&amp;phone=0899098899'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Authorization: Bearer {{TOKEN}}'</span>
</code></pre></div>
<blockquote>
<p>Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"call_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01b7d166-b564-42ec-80a1-4ad343225934"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>Error Response trả về:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fail"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User not registered extension with Softphone or IP Phone"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"error"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USER_NOT_REGISTERED"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>API dùng để thực hiện click-to-call.</p>

<p>Sau khi thực hiện click-to-call, hệ thống sẽ gọi vào số extension của domain, sau khi extension pickup cuộc gọi thì có một cuộc gọi đẩy ra số mobile dựa vào parameter của API.</p>

<p>API Click-to-call Asynchronous sẽ không chờ tới khi extension nhấc máy hoặc ngắt máy, mà sẽ trả về call_id nếu extension đã login và trả về mã lỗi nếu extension không login.</p>

<div class="alert alert-success alert-dismissible fade show" role="alert">
Đầu số hotline dùng để gọi ra ngoài bạn vui lòng liên hệ team TEL4VN để được cung cấp và cài đặt.
</div>
<h3 id='http-request-2' class='h3 font-weight-light'>HTTP Request</h3>
<p><code>GET https://{{API_HOST}}/v1/click2call/async?ext=&lt;EXTENSION&gt;&amp;phone=&lt;PHONE&gt;</code></p>
<h3 id='url-parameters-2' class='h3 font-weight-light'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead><tbody>
<tr>
<td>ext</td>
<td>Extension thực hiện cuộc gọi</td>
<td>true</td>
</tr>
<tr>
<td>phone</td>
<td>Số điện thoại sẽ được gọi tới</td>
<td>true</td>
</tr>
<tr>
<td>src_cid_name</td>
<td>Tên hiển thị trên máy extension. Default: Click2Call</td>
<td>false</td>
</tr>
<tr>
<td>src_cid_number</td>
<td>Số hiển thị trên máy extension. Default: Số của extension</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_name</td>
<td>Tên của số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>dest_cid_number</td>
<td>Số điện thoại sẽ chèn vào bản tin SIP</td>
<td>false</td>
</tr>
<tr>
<td>auto_answer</td>
<td>Tự động nhấc máy phía extension. Default: false</td>
<td>false</td>
</tr>
<tr>
<td>hotline</td>
<td>Đầu số hotline để thực hiện cuộc gọi ra ngoài</td>
<td>false</td>
</tr>
</tbody></table>
<h2 id='error' class='h2 font-weight-light'>Error</h2>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>USER_BUSY</td>
<td>Người dùng hiện tại đang bận</td>
</tr>
<tr>
<td>USER_NOT_REGISTERED</td>
<td>Người dùng chưa login Softphone hoặc IP Phone</td>
</tr>
</tbody></table>
